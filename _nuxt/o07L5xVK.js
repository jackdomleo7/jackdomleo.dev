import{f as A,a4 as k,z as y,J as l,R as x,a5 as I,c as L,Q as C,o as S,a6 as z,h as u,a7 as E,j as N,s as B,a8 as P,a9 as R,G as j,aa as U}from"./BxVE6YmD.js";import{i as W,u as $,a as q,m as D,c as w}from"./-7Og_qXs.js";const F=["src"],G=A({__name:"NuxtImg",props:W,emits:["load","error"],setup(p,{emit:t}){const s=p,a=k(),i=t,f=!1,h=$(),o=q(s),c=y(!1),n=y(),d=l(()=>h.getSizes(s.src,{...o.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...o.modifiers.value,width:w(s.width),height:w(s.height)}})),g=l(()=>{const e={...o.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=d.value.sizes,e.srcset=d.value.srcset),e}),m=l(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const r=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return h(s.src,{...o.modifiers.value,width:r[0],height:r[1],quality:r[2]||50,blur:r[3]||3},o.options.value)}),v=l(()=>s.sizes?d.value.src:h(s.src,o.modifiers.value,o.options.value)),_=l(()=>m.value?m.value:v.value),b=x().isHydrating;return I(()=>{if(m.value||s.custom){const e=new Image;v.value&&(e.src=v.value),s.sizes&&(e.sizes=d.value.sizes||"",e.srcset=d.value.srcset),e.onload=r=>{c.value=!0,i("load",r)},e.onerror=r=>{i("error",r)},D("nuxt-image");return}n.value&&(n.value.complete&&b&&(n.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),n.value.onload=e=>{i("load",e)},n.value.onerror=e=>{i("error",e)})}),(e,r)=>e.custom?C(e.$slots,"default",E(z({key:1},{...u(f)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...g.value,...u(a)},isLoaded:c.value,src:_.value}))):(S(),L("img",z({key:0,ref_key:"imgEl",ref:n,class:m.value&&!c.value?e.placeholderClass:void 0},{...u(f)?{onerror:"this.setAttribute('data-error', 1)"}:{},...g.value,...u(a)},{src:_.value}),null,16,F))}}),H=Object.assign(G,{__name:"NuxtImg"}),Q={__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(p){const t=p,s=l(()=>{if(t.src?.startsWith("/")&&!t.src.startsWith("//")){const a=P(R(j().app.baseURL));if(a!=="/"&&!t.src.startsWith(a))return U(a,t.src)}return t.src});return(a,i)=>(S(),N(B(u(H)),{src:u(s),alt:t.alt,width:t.width,height:t.height},null,8,["src","alt","width","height"]))}};export{Q as default};
