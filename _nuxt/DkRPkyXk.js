import{a8 as R,a9 as G,k as W,X as V,y as C,H as M,f as K,L as U,o as _,c as $,a as k,t as j,B as P,E as X,b as T,z as D,A as F,F as J,r as Q,l as Y,d as Z,v as ee,_ as te}from"./BQZeWf9W.js";function oe(o){return R()?(G(o),!0):!1}function E(o){return typeof o=="function"?o():W(o)}const q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const le=Object.prototype.toString,ne=o=>le.call(o)==="[object Object]",S=()=>{},ae=ie();function ie(){var o,c;return q&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((c=window==null?void 0:window.navigator)==null?void 0:c.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const z=q?window:void 0;function B(o){var c;const s=E(o);return(c=s==null?void 0:s.$el)!=null?c:s}function A(...o){let c,s,t,x;if(typeof o[0]=="string"||Array.isArray(o[0])?([s,t,x]=o,c=z):[c,s,t,x]=o,!c)return S;Array.isArray(s)||(s=[s]),Array.isArray(t)||(t=[t]);const f=[],d=()=>{f.forEach(p=>p()),f.length=0},e=(p,y,g,h)=>(p.addEventListener(y,g,h),()=>p.removeEventListener(y,g,h)),w=V(()=>[B(c),E(x)],([p,y])=>{if(d(),!p)return;const g=ne(y)?{...y}:y;f.push(...s.flatMap(h=>t.map(I=>e(p,h,I,g))))},{immediate:!0,flush:"post"}),m=()=>{w(),d()};return oe(m),m}let N=!1;function se(o,c,s={}){const{window:t=z,ignore:x=[],capture:f=!0,detectIframe:d=!1}=s;if(!t)return S;ae&&!N&&(N=!0,Array.from(t.document.body.children).forEach(i=>i.addEventListener("click",S)),t.document.documentElement.addEventListener("click",S));let e=!0;const w=i=>E(x).some(r=>{if(typeof r=="string")return Array.from(t.document.querySelectorAll(r)).some(v=>v===i.target||i.composedPath().includes(v));{const v=B(r);return v&&(i.target===v||i.composedPath().includes(v))}});function m(i){const r=E(i);return r&&r.$.subTree.shapeFlag===16}function p(i,r){const v=E(i),L=v.$.subTree&&v.$.subTree.children;return L==null||!Array.isArray(L)?!1:L.some(O=>O.el===r.target||r.composedPath().includes(O.el))}const y=i=>{const r=B(o);if(i.target!=null&&!(!(r instanceof Element)&&m(o)&&p(o,i))&&!(!r||r===i.target||i.composedPath().includes(r))){if(i.detail===0&&(e=!w(i)),!e){e=!0;return}c(i)}};let g=!1;const h=[A(t,"click",i=>{g||(g=!0,setTimeout(()=>{g=!1},0),y(i))},{passive:!0,capture:f}),A(t,"pointerdown",i=>{const r=B(o);e=!w(i)&&!!(r&&!i.composedPath().includes(r))},{passive:!0}),d&&A(t,"blur",i=>{setTimeout(()=>{var r;const v=B(o);((r=t.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(v!=null&&v.contains(t.document.activeElement))&&c(i)},0)})].filter(Boolean);return()=>h.forEach(i=>i())}function ue(o,c={}){const{initialValue:s=!1,focusVisible:t=!1,preventScroll:x=!1}=c,f=C(!1),d=M(()=>B(o));A(d,"focus",w=>{var m,p;(!t||(p=(m=w.target).matches)!=null&&p.call(m,":focus-visible"))&&(f.value=!0)}),A(d,"blur",()=>f.value=!1);const e=M({get:()=>f.value,set(w){var m,p;!w&&f.value?(m=d.value)==null||m.blur():w&&!f.value&&((p=d.value)==null||p.focus({preventScroll:x}))}});return V(d,()=>{e.value=s},{immediate:!0,flush:"post"}),{focused:e}}function re(o,c){let s=-1;c=c.toLowerCase().trim(),o=o.toLowerCase();for(let t=0;t<c.length;t++)if(!~(s=o.indexOf(c[t],s+1)))return!1;return!0}const ce=["for"],de={class:"combobox__wrapper"},fe=["aria-expanded","aria-owns"],pe=["id","value","placeholder","aria-activedescendant"],ve=["id","aria-multiselectable"],me=["id","aria-selected","data-value","onClick"],be={key:0,class:"combobox__tickbox"},we=K({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:o=>!/\s/g.test(o)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions","focus"],setup(o,{emit:c}){var O;const s=c,t=o,x=C(!1),f=C(!1),d=C(0),e=C(""),w=C((O=e.value.split(",").at(-1))==null?void 0:O.trim()),m=C(null);se(m,()=>h()),V(()=>t.value,()=>{p()}),V(()=>e.value,()=>{var a;w.value=(a=e.value.split(",").at(-1))==null?void 0:a.trim()}),U(()=>{p()});function p(){t.value&&t.value.length>0?(e.value=t.options.filter(a=>t.value.includes(a)).map(a=>a.text).join(", "),t.multiselectable||(e.value=e.value.split(",")[0].trim(),d.value=t.options.indexOf(t.options.find(a=>a.text===e.value)))):e.value="",s("selectedOptions",e.value.split(",").map(a=>a.trim()).filter(Boolean))}function y(){e.value="",s("selectedOptions",[])}function g(){if(x.value){x.value=!1,ue(document.getElementById(t.id),{initialValue:!0});return}h()}function h(){f.value=!1,d.value=0,document.getElementById(`${t.id}-listbox`).scrollTop=0;const a=e.value.split(",").map(u=>u.trim()),n=[...t.options.map(u=>u.text.toLowerCase()),...t.options.map(u=>u.value.toLowerCase())];for(const u of a)n.includes(u.toLowerCase())?e.value=e.value.replace(u,t.options.find(l=>l.text.toLowerCase()===u.toLowerCase()||l.value.toLowerCase()===u.toLowerCase()).text):e.value=e.value.replace(u,"");e.value=e.value.split(",").map(u=>u.trim()).filter(Boolean).join(", "),s("selectedOptions",e.value.split(",").map(u=>u.trim()).filter(Boolean))}function I(a){e.value=a.target.value;const n=e.value.split(",").map(l=>l.trim().toLowerCase()),u=[...t.options.map(l=>l.text.toLowerCase()),...t.options.map(l=>l.value.toLowerCase())];for(const l of n)u.includes(l)?(e.value=e.value.replace(l,t.options.find(b=>b.text.toLowerCase()===l||b.value.toLowerCase()===l).text),s("selectedOptions",e.value.split(",").map(b=>b.trim()).filter(Boolean))):s("selectedOptions",e.value.toLowerCase().replace(l,"").split(",").map(b=>b.trim()).filter(Boolean))}function i(a){const n=t.options.length-1,u=()=>{const l=document.getElementById(`${t.id}-listbox`),b=document.getElementById(`${t.id}-option-${d.value}`);l.scrollTop=b.offsetTop-l.clientHeight/2+b.clientHeight/2};switch(f.value||(f.value=!0),a.key){case"ArrowDown":a.preventDefault(),d.value!==n&&(d.value++,u());break;case"ArrowUp":a.preventDefault(),d.value!==0&&(d.value--,u());break;case"Enter":a.preventDefault(),r(t.options[d.value])}}function r(a){d.value=t.options.indexOf(a),t.multiselectable?v(a)?(e.value=e.value.replace(a.text,"").split(",").map(n=>n.trim()).filter(Boolean).join(", "),e.value.split(",").map(n=>n.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),a.text].map(n=>n.trim()).filter(Boolean).join(", ")+", ":(f.value=!1,e.value=[...e.value.split(","),a.text].map(n=>n.trim()).join(", ")),s("selectedOptions",e.value.split(",").map(n=>n.trim()).filter(Boolean))}function v(a){return e.value.split(",").map(n=>n.trim()).includes(a.text)}function L(a){return t.options[d.value]===a}return(a,n)=>{const u=ee;return _(),$("div",{ref_key:"combobox",ref:m,class:"combobox"},[k("label",{for:o.id,class:"sr-only"},j(o.label),9,ce),k("div",de,[k("div",{class:P(["combobox__header",{"combobox__header--open":f.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${f.value}`,"aria-owns":`${o.id}-listbox`},[k("input",{id:o.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:o.label,"aria-activedescendant":`${o.id}-option-${d.value}`,onClick:n[0]||(n[0]=l=>!!e.value&&!!e.value.split(",").map(b=>b.trim()).at(-1)&&(e.value+=", ")),onFocus:n[1]||(n[1]=l=>{f.value=!0,s("focus")}),onBlur:g,onInput:n[2]||(n[2]=l=>I(l)),onKeydown:n[3]||(n[3]=l=>i(l))},null,40,pe),e.value?(_(),$("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:n[4]||(n[4]=l=>y())},[T(u,{name:"cross"}),n[6]||(n[6]=k("span",{class:"sr-only"},"Clear",-1))])):(_(),X(u,{key:0,class:"combobox__header-icon combobox__chevron",name:"chevron_down"}))],10,fe),D(k("div",{id:`${o.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${o.multiselectable}`},[(_(!0),$(J,null,Q(o.options,(l,b)=>D((_(),$("div",{id:`${o.id}-option-${b}`,key:l.value,class:P(["combobox__option",{"combobox__option--selected":v(l),"combobox__option--current":L(l)}]),role:"option","aria-selected":`${v(l)}`,"data-value":l.value,onClick:H=>r(l),onMousedown:n[5]||(n[5]=H=>x.value=!0)},[o.multiselectable?(_(),$("div",be,[T(u,{name:"tick"})])):Y("",!0),Z(" "+j(l.text),1)],42,me)),[[F,W(re)(l.text,w.value||"")]])),128))],8,ve),[[F,f.value]])])],512)}}}),ye=te(we,[["__scopeId","data-v-5a0dbf31"]]);export{ye as default};
