import{g as S,i as M,z as E,A as P,j,k as N,o as a,c as i,b as m,l as n,m as V,a as l,F as y,v as D,n as q,B as O,C as R,w as T,t as u,q as C,D as z,E as G,e as H,p as J,f as K,_ as Q}from"./entry.d00dd5c1.js";import{_ as U}from"./nuxt-picture.94a015d5.js";const W=o=>(J("data-v-02e4b7ce"),o=o(),K(),o),X={key:0,class:"container"},Z={class:"posts container"},ee={class:"post__article"},te={class:"post__details"},se={class:"post__tags"},oe={class:"post__title"},le={class:"post__description"},ae={class:"post__date"},ie=W(()=>l("span",{class:"sr-only"},"Publish date:",-1)),ne=["datetime"],re=S({__name:"ArticleList",props:{limit:{type:Number,default:1e3,validator(o){return o>=0&&o<=1e3}},preloadArticleImages:{type:Number,default:0,validator(o){return o>=0}},showFilter:{type:Boolean,default:!1}},async setup(o){let r,g;const x=z(()=>G(()=>import("./ComboboxInput.210aabc8.js"),["./ComboboxInput.210aabc8.js","./entry.d00dd5c1.js","./entry.22896276.css","./ComboboxInput.0190ed27.css"],import.meta.url)),d=M(),F=E(),p=P([]),h=o,{data:L}=([r,g]=j(()=>q(`article-list-${d.params.slug}`,e=>e.$contentful.getEntries({content_type:"article",limit:1e3,order:"-fields.publishDate",select:["fields.title","fields.description","fields.image","fields.tags","fields.publishDate","fields.slug"]}))),r=await r,g(),r),_=N(L.value.items),Y=[...new Set(_.map(e=>e.fields.tags.join(",")).join(",").split(","))].filter(Boolean).sort(),A=[...new Set(_.map(e=>`${new Date(e.fields.publishDate).getFullYear()}`))].filter(Boolean),w=[...Y.map(e=>({value:e,text:e})),...A.map(e=>({value:e,text:e}))],B=(d.query.filters?d.query.filters.split(",").map(e=>w.find(s=>s.value.toLowerCase()===e.toLowerCase()||s.text.toLowerCase()===e.toLowerCase())):[]).filter(Boolean);function $(e){if(!p.value.length||!e.fields.tags.length)return!0;for(const s of p.value)if(e.fields.tags.map(c=>c.toLowerCase()).includes(s.toLowerCase())||`${new Date(e.fields.publishDate).getFullYear()}`===s)return!0;return!1}function k(e){p.value=e,F.replace({query:{filters:e.length?e.join(",").toLowerCase():void 0}})}function I(){const e=document.getElementById("filter"),s=72,f=e.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:f,behavior:"smooth"})}return(e,s)=>{const c=U,f=H;return a(),i("div",null,[o.showFilter?(a(),i("div",X,[m(n(x),{id:"filter",label:"Filters",multiselectable:!0,value:n(B),options:w,class:"filter",onSelectedOptions:s[0]||(s[0]=t=>k(t)),onFocus:s[1]||(s[1]=t=>I())},null,8,["value"])])):V("",!0),l("ul",Z,[(a(!0),i(y,null,D(n(_),(t,b)=>O((a(),i("li",{key:t.sys.id},[m(f,{to:`/blog/${new Date(t.fields.publishDate).getFullYear()}/${t.fields.slug}`,class:"post"},{default:T(()=>[l("article",ee,[m(c,{class:"post__img",provider:"contentful",src:t.fields.image.fields.file.url,alt:t.fields.image.fields.description,width:"424",height:"223",sizes:"4kdesktop:424px",loading:"lazy",preload:b<=h.preloadArticleImages},null,8,["src","alt","preload"]),l("div",te,[l("ul",se,[(a(!0),i(y,null,D(t.fields.tags,v=>(a(),i("li",{key:v,class:"tag"},u(v),1))),128))]),l("h2",oe,u(t.fields.title),1),l("p",le,u(t.fields.description),1),l("footer",null,[l("p",ae,[ie,l("time",{datetime:n(C)(new Date(t.fields.publishDate)).format("YYYY-MM-DD")},u(n(C)(new Date(t.fields.publishDate)).format("MMMM D, YYYY")),9,ne)])])])])]),_:2},1032,["to"])])),[[R,$(t)&&b<h.limit]])),128))])])}}});const de=Q(re,[["__scopeId","data-v-02e4b7ce"]]);export{de as A};
