import{a2 as W,a3 as K,l as N,a4 as I,A as _,H as A,g as G,J,o as g,c as k,a as h,t as S,a5 as V,G as R,b as D,B as F,C as M,F as U,v as Q,m as X,d as Y,y as Z,p as ee,f as te,_ as oe}from"./entry.dea70900.js";function le(t){return W()?(K(t),!0):!1}function P(t){return typeof t=="function"?t():N(t)}const q=typeof window<"u",E=()=>{},ae=ne();function ne(){var t;return q&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function C(t){var u;const o=P(t);return(u=o==null?void 0:o.$el)!=null?u:o}const z=q?window:void 0;function B(...t){let u,o,i,d;if(typeof t[0]=="string"||Array.isArray(t[0])?([o,i,d]=t,u=z):[u,o,i,d]=t,!u)return E;Array.isArray(o)||(o=[o]),Array.isArray(i)||(i=[i]);const c=[],e=()=>{c.forEach(x=>x()),c.length=0},v=(x,y,s,p)=>(x.addEventListener(y,s,p),()=>x.removeEventListener(y,s,p)),f=I(()=>[C(u),P(d)],([x,y])=>{e(),x&&c.push(...o.flatMap(s=>i.map(p=>v(x,s,p,y))))},{immediate:!0,flush:"post"}),b=()=>{f(),e()};return le(b),b}let j=!1;function se(t,u,o={}){const{window:i=z,ignore:d=[],capture:c=!0,detectIframe:e=!1}=o;if(!i)return;ae&&!j&&(j=!0,Array.from(i.document.body.children).forEach(s=>s.addEventListener("click",E)),i.document.documentElement.addEventListener("click",E));let v=!0;const f=s=>d.some(p=>{if(typeof p=="string")return Array.from(i.document.querySelectorAll(p)).some(w=>w===s.target||s.composedPath().includes(w));{const w=C(p);return w&&(s.target===w||s.composedPath().includes(w))}}),x=[B(i,"click",s=>{const p=C(t);if(!(!p||p===s.target||s.composedPath().includes(p))){if(s.detail===0&&(v=!f(s)),!v){v=!0;return}u(s)}},{passive:!0,capture:c}),B(i,"pointerdown",s=>{const p=C(t);p&&(v=!s.composedPath().includes(p)&&!f(s))},{passive:!0}),e&&B(i,"blur",s=>{setTimeout(()=>{var p;const w=C(t);((p=i.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(w!=null&&w.contains(i.document.activeElement))&&u(s)},0)})].filter(Boolean);return()=>x.forEach(s=>s())}function ie(t,u={}){const{initialValue:o=!1,focusVisible:i=!1}=u,d=_(!1),c=A(()=>C(t));B(c,"focus",v=>{var f,b;(!i||(b=(f=v.target).matches)!=null&&b.call(f,":focus-visible"))&&(d.value=!0)}),B(c,"blur",()=>d.value=!1);const e=A({get:()=>d.value,set(v){var f,b;!v&&d.value?(f=c.value)==null||f.blur():v&&!d.value&&((b=c.value)==null||b.focus())}});return I(c,()=>{e.value=o},{immediate:!0,flush:"post"}),{focused:e}}function ue(t,u){let o=-1;u=u.toLowerCase().trim(),t=t.toLowerCase();for(let i=0;i<u.length;i++)if(!~(o=t.indexOf(u[i],o+1)))return!1;return!0}const re=t=>(ee("data-v-d3ed6b4f"),t=t(),te(),t),ce=["for"],de={class:"combobox__wrapper"},pe=["aria-expanded","aria-owns"],ve=["id","value","placeholder","aria-activedescendant"],fe=re(()=>h("span",{class:"sr-only"},"Clear",-1)),me=["id","aria-multiselectable"],be=["id","aria-selected","data-value","onClick"],xe={key:0,class:"combobox__tickbox"},we=G({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:t=>!/\s/g.test(t)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions"],setup(t,{emit:u}){var $;const o=t,i=_(!1),d=_(!1),c=_(0),e=_(""),v=_(($=e.value.split(",").at(-1))==null?void 0:$.trim()),f=_(null);se(f,()=>s()),I(()=>o.value,()=>{b()}),I(()=>e.value,()=>{var a;v.value=(a=e.value.split(",").at(-1))==null?void 0:a.trim()}),J(()=>{b()});function b(){o.value&&o.value.length>0?(e.value=o.options.filter(a=>o.value.includes(a)).map(a=>a.text).join(", "),o.multiselectable||(e.value=e.value.split(",")[0].trim(),c.value=o.options.indexOf(o.options.find(a=>a.text===e.value)))):e.value="",u("selectedOptions",e.value.split(",").map(a=>a.trim()).filter(Boolean))}function x(){e.value="",u("selectedOptions",[])}function y(){if(i.value){i.value=!1,ie(document.getElementById(o.id),{initialValue:!0});return}s()}function s(){d.value=!1,c.value=0,document.getElementById(`${o.id}-listbox`).scrollTop=0;const a=e.value.split(",").map(r=>r.trim()),n=[...o.options.map(r=>r.text.toLowerCase()),...o.options.map(r=>r.value.toLowerCase())];for(const r of a)n.includes(r.toLowerCase())?e.value=e.value.replace(r,o.options.find(l=>l.text.toLowerCase()===r.toLowerCase()||l.value.toLowerCase()===r.toLowerCase()).text):e.value=e.value.replace(r,"");e.value=e.value.split(",").map(r=>r.trim()).filter(Boolean).join(", "),u("selectedOptions",e.value.split(",").map(r=>r.trim()).filter(Boolean))}function p(a){e.value=a.target.value;const n=e.value.split(",").map(l=>l.trim().toLowerCase()),r=[...o.options.map(l=>l.text.toLowerCase()),...o.options.map(l=>l.value.toLowerCase())];for(const l of n)r.includes(l)?(e.value=e.value.replace(l,o.options.find(m=>m.text.toLowerCase()===l||m.value.toLowerCase()===l).text),u("selectedOptions",e.value.split(",").map(m=>m.trim()).filter(Boolean))):u("selectedOptions",e.value.toLowerCase().replace(l,"").split(",").map(m=>m.trim()).filter(Boolean))}function w(a){const n=o.options.length-1,r=()=>{const l=document.getElementById(`${o.id}-listbox`),m=document.getElementById(`${o.id}-option-${c.value}`);l.scrollTop=m.offsetTop-l.clientHeight/2+m.clientHeight/2};switch(d.value||(d.value=!0),a.key){case"ArrowDown":a.preventDefault(),c.value!==n&&(c.value++,r());break;case"ArrowUp":a.preventDefault(),c.value!==0&&(c.value--,r());break;case"Enter":a.preventDefault(),O(o.options[c.value])}}function O(a){c.value=o.options.indexOf(a),o.multiselectable?L(a)?(e.value=e.value.replace(a.text,"").split(",").map(n=>n.trim()).filter(Boolean).join(", "),e.value.split(",").map(n=>n.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),a.text].map(n=>n.trim()).filter(Boolean).join(", ")+", ":(d.value=!1,e.value=[...e.value.split(","),a.text].map(n=>n.trim()).join(", ")),u("selectedOptions",e.value.split(",").map(n=>n.trim()).filter(Boolean))}function L(a){return e.value.split(",").map(n=>n.trim()).includes(a.text)}function H(a){return o.options[c.value]===a}return(a,n)=>{const r=Z;return g(),k("div",{ref_key:"combobox",ref:f,class:"combobox"},[h("label",{for:t.id,class:"sr-only"},S(t.label),9,ce),h("div",de,[h("div",{class:V(["combobox__header",{"combobox__header--open":d.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${d.value}`,"aria-owns":`${t.id}-listbox`},[h("input",{id:t.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:t.label,"aria-activedescendant":`${t.id}-option-${c.value}`,onClick:n[0]||(n[0]=l=>{d.value=!0,e.value&&e.value.split(",").map(m=>m.trim()).at(-1)&&(e.value+=", ")}),onFocus:n[1]||(n[1]=l=>d.value=!0),onBlur:y,onInput:n[2]||(n[2]=l=>p(l)),onKeydown:n[3]||(n[3]=l=>w(l))},null,40,ve),e.value?(g(),k("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:n[4]||(n[4]=l=>x())},[D(r,{name:"cross"}),fe])):(g(),R(r,{key:0,class:"combobox__header-icon combobox__chevron",name:"chevron_down"}))],10,pe),F(h("div",{id:`${t.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${t.multiselectable}`},[(g(!0),k(U,null,Q(t.options,(l,m)=>F((g(),k("div",{id:`${t.id}-option-${m}`,key:l.value,class:V(["combobox__option",{"combobox__option--selected":L(l),"combobox__option--current":H(l)}]),role:"option","aria-selected":`${L(l)}`,"data-value":l.value,onClick:T=>O(l),onMousedown:n[5]||(n[5]=T=>i.value=!0)},[t.multiselectable?(g(),k("div",xe,[D(r,{name:"tick"})])):X("",!0),Y(" "+S(l.text),1)],42,be)),[[M,N(ue)(l.text,v.value||"")]])),128))],8,me),[[M,d.value]])])],512)}}});const _e=oe(we,[["__scopeId","data-v-d3ed6b4f"]]);export{_e as default};
