import{a9 as G,aa as K,l as P,Y as L,A as g,J as $,g as J,N as R,o as h,c as k,a as _,t as A,D as V,H as U,b as j,B as D,C as M,F as Y,v as Q,m as X,d as Z,y as ee,p as te,f as oe,_ as le}from"./B-FTczGO.js";function ae(t){return G()?(K(t),!0):!1}function N(t){return typeof t=="function"?t():P(t)}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=Object.prototype.toString,ie=t=>ne.call(t)==="[object Object]",O=()=>{},se=ue();function ue(){var t,r;return T&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((r=window==null?void 0:window.navigator)==null?void 0:r.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function C(t){var r;const s=N(t);return(r=s==null?void 0:s.$el)!=null?r:s}const W=T?window:void 0;function B(...t){let r,s,o,x;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,o,x]=t,r=W):[r,s,o,x]=t,!r)return O;Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]);const p=[],c=()=>{p.forEach(f=>f()),p.length=0},e=(f,y,i,d)=>(f.addEventListener(y,i,d),()=>f.removeEventListener(y,i,d)),b=L(()=>[C(r),N(x)],([f,y])=>{if(c(),!f)return;const i=ie(y)?{...y}:y;p.push(...s.flatMap(d=>o.map(v=>e(f,d,v,i))))},{immediate:!0,flush:"post"}),w=()=>{b(),c()};return ae(w),w}let F=!1;function re(t,r,s={}){const{window:o=W,ignore:x=[],capture:p=!0,detectIframe:c=!1}=s;if(!o)return O;se&&!F&&(F=!0,Array.from(o.document.body.children).forEach(i=>i.addEventListener("click",O)),o.document.documentElement.addEventListener("click",O));let e=!0;const b=i=>x.some(d=>{if(typeof d=="string")return Array.from(o.document.querySelectorAll(d)).some(v=>v===i.target||i.composedPath().includes(v));{const v=C(d);return v&&(i.target===v||i.composedPath().includes(v))}}),f=[B(o,"click",i=>{const d=C(t);if(!(!d||d===i.target||i.composedPath().includes(d))){if(i.detail===0&&(e=!b(i)),!e){e=!0;return}r(i)}},{passive:!0,capture:p}),B(o,"pointerdown",i=>{const d=C(t);e=!b(i)&&!!(d&&!i.composedPath().includes(d))},{passive:!0}),c&&B(o,"blur",i=>{setTimeout(()=>{var d;const v=C(t);((d=o.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(v!=null&&v.contains(o.document.activeElement))&&r(i)},0)})].filter(Boolean);return()=>f.forEach(i=>i())}function ce(t,r={}){const{initialValue:s=!1,focusVisible:o=!1,preventScroll:x=!1}=r,p=g(!1),c=$(()=>C(t));B(c,"focus",b=>{var w,f;(!o||(f=(w=b.target).matches)!=null&&f.call(w,":focus-visible"))&&(p.value=!0)}),B(c,"blur",()=>p.value=!1);const e=$({get:()=>p.value,set(b){var w,f;!b&&p.value?(w=c.value)==null||w.blur():b&&!p.value&&((f=c.value)==null||f.focus({preventScroll:x}))}});return L(c,()=>{e.value=s},{immediate:!0,flush:"post"}),{focused:e}}function de(t,r){let s=-1;r=r.toLowerCase().trim(),t=t.toLowerCase();for(let o=0;o<r.length;o++)if(!~(s=t.indexOf(r[o],s+1)))return!1;return!0}const pe=t=>(te("data-v-5a0dbf31"),t=t(),oe(),t),fe=["for"],ve={class:"combobox__wrapper"},me=["aria-expanded","aria-owns"],be=["id","value","placeholder","aria-activedescendant"],we=pe(()=>_("span",{class:"sr-only"},"Clear",-1)),xe=["id","aria-multiselectable"],ye=["id","aria-selected","data-value","onClick"],ge={key:0,class:"combobox__tickbox"},he=J({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:t=>!/\s/g.test(t)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions","focus"],setup(t,{emit:r}){var S;const s=r,o=t,x=g(!1),p=g(!1),c=g(0),e=g(""),b=g((S=e.value.split(",").at(-1))==null?void 0:S.trim()),w=g(null);re(w,()=>d()),L(()=>o.value,()=>{f()}),L(()=>e.value,()=>{var a;b.value=(a=e.value.split(",").at(-1))==null?void 0:a.trim()}),R(()=>{f()});function f(){o.value&&o.value.length>0?(e.value=o.options.filter(a=>o.value.includes(a)).map(a=>a.text).join(", "),o.multiselectable||(e.value=e.value.split(",")[0].trim(),c.value=o.options.indexOf(o.options.find(a=>a.text===e.value)))):e.value="",s("selectedOptions",e.value.split(",").map(a=>a.trim()).filter(Boolean))}function y(){e.value="",s("selectedOptions",[])}function i(){if(x.value){x.value=!1,ce(document.getElementById(o.id),{initialValue:!0});return}d()}function d(){p.value=!1,c.value=0,document.getElementById(`${o.id}-listbox`).scrollTop=0;const a=e.value.split(",").map(u=>u.trim()),n=[...o.options.map(u=>u.text.toLowerCase()),...o.options.map(u=>u.value.toLowerCase())];for(const u of a)n.includes(u.toLowerCase())?e.value=e.value.replace(u,o.options.find(l=>l.text.toLowerCase()===u.toLowerCase()||l.value.toLowerCase()===u.toLowerCase()).text):e.value=e.value.replace(u,"");e.value=e.value.split(",").map(u=>u.trim()).filter(Boolean).join(", "),s("selectedOptions",e.value.split(",").map(u=>u.trim()).filter(Boolean))}function v(a){e.value=a.target.value;const n=e.value.split(",").map(l=>l.trim().toLowerCase()),u=[...o.options.map(l=>l.text.toLowerCase()),...o.options.map(l=>l.value.toLowerCase())];for(const l of n)u.includes(l)?(e.value=e.value.replace(l,o.options.find(m=>m.text.toLowerCase()===l||m.value.toLowerCase()===l).text),s("selectedOptions",e.value.split(",").map(m=>m.trim()).filter(Boolean))):s("selectedOptions",e.value.toLowerCase().replace(l,"").split(",").map(m=>m.trim()).filter(Boolean))}function q(a){const n=o.options.length-1,u=()=>{const l=document.getElementById(`${o.id}-listbox`),m=document.getElementById(`${o.id}-option-${c.value}`);l.scrollTop=m.offsetTop-l.clientHeight/2+m.clientHeight/2};switch(p.value||(p.value=!0),a.key){case"ArrowDown":a.preventDefault(),c.value!==n&&(c.value++,u());break;case"ArrowUp":a.preventDefault(),c.value!==0&&(c.value--,u());break;case"Enter":a.preventDefault(),E(o.options[c.value])}}function E(a){c.value=o.options.indexOf(a),o.multiselectable?I(a)?(e.value=e.value.replace(a.text,"").split(",").map(n=>n.trim()).filter(Boolean).join(", "),e.value.split(",").map(n=>n.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),a.text].map(n=>n.trim()).filter(Boolean).join(", ")+", ":(p.value=!1,e.value=[...e.value.split(","),a.text].map(n=>n.trim()).join(", ")),s("selectedOptions",e.value.split(",").map(n=>n.trim()).filter(Boolean))}function I(a){return e.value.split(",").map(n=>n.trim()).includes(a.text)}function z(a){return o.options[c.value]===a}return(a,n)=>{const u=ee;return h(),k("div",{ref_key:"combobox",ref:w,class:"combobox"},[_("label",{for:t.id,class:"sr-only"},A(t.label),9,fe),_("div",ve,[_("div",{class:V(["combobox__header",{"combobox__header--open":p.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${p.value}`,"aria-owns":`${t.id}-listbox`},[_("input",{id:t.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:t.label,"aria-activedescendant":`${t.id}-option-${c.value}`,onClick:n[0]||(n[0]=l=>!!e.value&&!!e.value.split(",").map(m=>m.trim()).at(-1)&&(e.value+=", ")),onFocus:n[1]||(n[1]=l=>{p.value=!0,s("focus")}),onBlur:i,onInput:n[2]||(n[2]=l=>v(l)),onKeydown:n[3]||(n[3]=l=>q(l))},null,40,be),e.value?(h(),k("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:n[4]||(n[4]=l=>y())},[j(u,{name:"cross"}),we])):(h(),U(u,{key:0,class:"combobox__header-icon combobox__chevron",name:"chevron_down"}))],10,me),D(_("div",{id:`${t.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${t.multiselectable}`},[(h(!0),k(Y,null,Q(t.options,(l,m)=>D((h(),k("div",{id:`${t.id}-option-${m}`,key:l.value,class:V(["combobox__option",{"combobox__option--selected":I(l),"combobox__option--current":z(l)}]),role:"option","aria-selected":`${I(l)}`,"data-value":l.value,onClick:H=>E(l),onMousedown:n[5]||(n[5]=H=>x.value=!0)},[t.multiselectable?(h(),k("div",ge,[j(u,{name:"tick"})])):X("",!0),Z(" "+A(l.text),1)],42,ye)),[[M,P(de)(l.text,b.value||"")]])),128))],8,xe),[[M,p.value]])])],512)}}}),Ce=le(he,[["__scopeId","data-v-5a0dbf31"]]);export{Ce as default};
