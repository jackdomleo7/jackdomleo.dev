import{a2 as T,a3 as W,l as j,a4 as E,A as _,H as $,g as K,J,o as B,c as L,a as h,t as A,a5 as V,b as S,B as D,C as M,F as R,v as U,m as G,d as Q,y as X,_ as Y}from"./entry.52b8878e.js";function Z(o){return T()?(W(o),!0):!1}function N(o){return typeof o=="function"?o():j(o)}const P=typeof window<"u",O=()=>{},ee=te();function te(){var o;return P&&((o=window==null?void 0:window.navigator)==null?void 0:o.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function g(o){var u;const t=N(o);return(u=t==null?void 0:t.$el)!=null?u:t}const q=P?window:void 0;function C(...o){let u,t,n,d;if(typeof o[0]=="string"||Array.isArray(o[0])?([t,n,d]=o,u=q):[u,t,n,d]=o,!u)return O;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);const r=[],e=()=>{r.forEach(x=>x()),r.length=0},f=(x,y,i,v)=>(x.addEventListener(y,i,v),()=>x.removeEventListener(y,i,v)),p=E(()=>[g(u),N(d)],([x,y])=>{e(),x&&r.push(...t.flatMap(i=>n.map(v=>f(x,i,v,y))))},{immediate:!0,flush:"post"}),m=()=>{p(),e()};return Z(m),m}let F=!1;function oe(o,u,t={}){const{window:n=q,ignore:d=[],capture:r=!0,detectIframe:e=!1}=t;if(!n)return;ee&&!F&&(F=!0,Array.from(n.document.body.children).forEach(i=>i.addEventListener("click",O)),n.document.documentElement.addEventListener("click",O));let f=!0;const p=i=>d.some(v=>{if(typeof v=="string")return Array.from(n.document.querySelectorAll(v)).some(b=>b===i.target||i.composedPath().includes(b));{const b=g(v);return b&&(i.target===b||i.composedPath().includes(b))}}),x=[C(n,"click",i=>{const v=g(o);if(!(!v||v===i.target||i.composedPath().includes(v))){if(i.detail===0&&(f=!p(i)),!f){f=!0;return}u(i)}},{passive:!0,capture:r}),C(n,"pointerdown",i=>{const v=g(o);v&&(f=!i.composedPath().includes(v)&&!p(i))},{passive:!0}),e&&C(n,"blur",i=>{setTimeout(()=>{var v;const b=g(o);((v=n.document.activeElement)==null?void 0:v.tagName)==="IFRAME"&&!(b!=null&&b.contains(n.document.activeElement))&&u(i)},0)})].filter(Boolean);return()=>x.forEach(i=>i())}function le(o,u={}){const{initialValue:t=!1,focusVisible:n=!1}=u,d=_(!1),r=$(()=>g(o));C(r,"focus",f=>{var p,m;(!n||(m=(p=f.target).matches)!=null&&m.call(p,":focus-visible"))&&(d.value=!0)}),C(r,"blur",()=>d.value=!1);const e=$({get:()=>d.value,set(f){var p,m;!f&&d.value?(p=r.value)==null||p.blur():f&&!d.value&&((m=r.value)==null||m.focus())}});return E(r,()=>{e.value=t},{immediate:!0,flush:"post"}),{focused:e}}function ae(o,u){let t=-1;u=u.toLowerCase().trim(),o=o.toLowerCase();for(let n=0;n<u.length;n++)if(!~(t=o.indexOf(u[n],t+1)))return!1;return!0}const ne=["for"],ie={class:"combobox__wrapper"},se=["aria-expanded","aria-owns"],ue=["id","value","placeholder","aria-activedescendant"],re=["id","aria-multiselectable"],ce=["id","aria-selected","data-value","onClick"],de={key:0,class:"combobox__tickbox"},ve=K({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:o=>!/\s/g.test(o)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions"],setup(o,{emit:u}){var I;const t=o,n=_(!1),d=_(!1),r=_(0),e=_(""),f=_((I=e.value.split(",").at(-1))==null?void 0:I.trim()),p=_(null);oe(p,()=>y()),E(()=>t.value,()=>{m()}),E(()=>e.value,()=>{var a;f.value=(a=e.value.split(",").at(-1))==null?void 0:a.trim()}),J(()=>{m()});function m(){t.value&&t.value.length>0?(e.value=t.options.filter(a=>t.value.includes(a)).map(a=>a.text).join(", "),t.multiselectable||(e.value=e.value.split(",")[0].trim(),r.value=t.options.indexOf(t.options.find(a=>a.text===e.value)))):e.value="",u("selectedOptions",e.value.split(",").map(a=>a.trim()).filter(Boolean))}function x(){if(n.value){n.value=!1,le(document.getElementById(t.id),{initialValue:!0});return}y()}function y(){d.value=!1,r.value=0,document.getElementById(`${t.id}-listbox`).scrollTop=0;const a=e.value.split(",").map(c=>c.trim()),s=[...t.options.map(c=>c.text.toLowerCase()),...t.options.map(c=>c.value.toLowerCase())];for(const c of a)s.includes(c.toLowerCase())?e.value=e.value.replace(c,t.options.find(l=>l.text.toLowerCase()===c.toLowerCase()||l.value.toLowerCase()===c.toLowerCase()).text):e.value=e.value.replace(c,"");e.value=e.value.split(",").map(c=>c.trim()).filter(Boolean).join(", "),u("selectedOptions",e.value.split(",").map(c=>c.trim()).filter(Boolean))}function i(a){e.value=a.target.value;const s=e.value.split(",").map(l=>l.trim().toLowerCase()),c=[...t.options.map(l=>l.text.toLowerCase()),...t.options.map(l=>l.value.toLowerCase())];for(const l of s)c.includes(l)?(e.value=e.value.replace(l,t.options.find(w=>w.text.toLowerCase()===l||w.value.toLowerCase()===l).text),u("selectedOptions",e.value.split(",").map(w=>w.trim()).filter(Boolean))):u("selectedOptions",e.value.toLowerCase().replace(l,"").split(",").map(w=>w.trim()).filter(Boolean))}function v(a){const s=t.options.length-1,c=()=>{const l=document.getElementById(`${t.id}-listbox`),w=document.getElementById(`${t.id}-option-${r.value}`);l.scrollTop=w.offsetTop-l.clientHeight/2+w.clientHeight/2};switch(d.value||(d.value=!0),a.key){case"ArrowDown":a.preventDefault(),r.value!==s&&(r.value++,c());break;case"ArrowUp":a.preventDefault(),r.value!==0&&(r.value--,c());break;case"Enter":a.preventDefault(),b(t.options[r.value])}}function b(a){r.value=t.options.indexOf(a),t.multiselectable?k(a)?(e.value=e.value.replace(a.text,"").split(",").map(s=>s.trim()).filter(Boolean).join(", "),e.value.split(",").map(s=>s.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),a.text].map(s=>s.trim()).filter(Boolean).join(", ")+", ":(d.value=!1,e.value=[...e.value.split(","),a.text].map(s=>s.trim()).join(", ")),u("selectedOptions",e.value.split(",").map(s=>s.trim()).filter(Boolean))}function k(a){return e.value.split(",").map(s=>s.trim()).includes(a.text)}function z(a){return t.options[r.value]===a}return(a,s)=>{const c=X;return B(),L("div",{ref_key:"combobox",ref:p,class:"combobox"},[h("label",{for:o.id,class:"sr-only"},A(o.label),9,ne),h("div",ie,[h("div",{class:V(["combobox__header",{"combobox__header--open":d.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${d.value}`,"aria-owns":`${o.id}-listbox`},[h("input",{id:o.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:o.label,"aria-activedescendant":`${o.id}-option-${r.value}`,onClick:s[0]||(s[0]=l=>{d.value=!0,e.value&&(e.value+=", ")}),onBlur:x,onInput:s[1]||(s[1]=l=>i(l)),onKeydown:s[2]||(s[2]=l=>v(l))},null,40,ue),S(c,{class:"combobox__chevron",name:"chevron_down"})],10,se),D(h("div",{id:`${o.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${o.multiselectable}`},[(B(!0),L(R,null,U(o.options,(l,w)=>D((B(),L("div",{id:`${o.id}-option-${w}`,key:l.value,class:V(["combobox__option",{"combobox__option--selected":k(l),"combobox__option--current":z(l)}]),role:"option","aria-selected":`${k(l)}`,"data-value":l.value,onClick:H=>b(l),onMousedown:s[3]||(s[3]=H=>n.value=!0)},[o.multiselectable?(B(),L("div",de,[S(c,{name:"tick"})])):G("",!0),Q(" "+A(l.text),1)],42,ce)),[[M,j(ae)(l.text,f.value||"")]])),128))],8,re),[[M,d.value]])])],512)}}});const pe=Y(ve,[["__scopeId","data-v-23030464"]]);export{pe as default};
