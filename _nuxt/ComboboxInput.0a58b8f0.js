import{a2 as K,a3 as G,l as N,a4 as O,A as _,H as A,g as J,J as R,o as g,c as k,a as h,t as S,a5 as V,G as U,b as j,B as D,C as F,F as Q,v as X,m as Y,d as Z,y as ee,p as te,f as oe,_ as le}from"./entry.b341504d.js";function ae(t){return K()?(G(t),!0):!1}function P(t){return typeof t=="function"?t():N(t)}const q=typeof window<"u"&&typeof document<"u",ne=Object.prototype.toString,se=t=>ne.call(t)==="[object Object]",L=()=>{},ie=ue();function ue(){var t;return q&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function C(t){var d;const i=P(t);return(d=i==null?void 0:i.$el)!=null?d:i}const z=q?window:void 0;function B(...t){let d,i,o,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([i,o,f]=t,d=z):[d,i,o,f]=t,!d)return L;Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]);const c=[],p=()=>{c.forEach(y=>y()),c.length=0},e=(y,w,s,r)=>(y.addEventListener(w,s,r),()=>y.removeEventListener(w,s,r)),v=O(()=>[C(d),P(f)],([y,w])=>{if(p(),!y)return;const s=se(w)?{...w}:w;c.push(...i.flatMap(r=>o.map(m=>e(y,r,m,s))))},{immediate:!0,flush:"post"}),x=()=>{v(),p()};return ae(x),x}let M=!1;function re(t,d,i={}){const{window:o=z,ignore:f=[],capture:c=!0,detectIframe:p=!1}=i;if(!o)return;ie&&!M&&(M=!0,Array.from(o.document.body.children).forEach(s=>s.addEventListener("click",L)),o.document.documentElement.addEventListener("click",L));let e=!0;const v=s=>f.some(r=>{if(typeof r=="string")return Array.from(o.document.querySelectorAll(r)).some(m=>m===s.target||s.composedPath().includes(m));{const m=C(r);return m&&(s.target===m||s.composedPath().includes(m))}}),y=[B(o,"click",s=>{const r=C(t);if(!(!r||r===s.target||s.composedPath().includes(r))){if(s.detail===0&&(e=!v(s)),!e){e=!0;return}d(s)}},{passive:!0,capture:c}),B(o,"pointerdown",s=>{const r=C(t);r&&(e=!s.composedPath().includes(r)&&!v(s))},{passive:!0}),p&&B(o,"blur",s=>{setTimeout(()=>{var r;const m=C(t);((r=o.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(m!=null&&m.contains(o.document.activeElement))&&d(s)},0)})].filter(Boolean);return()=>y.forEach(s=>s())}function ce(t,d={}){const{initialValue:i=!1,focusVisible:o=!1}=d,f=_(!1),c=A(()=>C(t));B(c,"focus",e=>{var v,x;(!o||(x=(v=e.target).matches)!=null&&x.call(v,":focus-visible"))&&(f.value=!0)}),B(c,"blur",()=>f.value=!1);const p=A({get:()=>f.value,set(e){var v,x;!e&&f.value?(v=c.value)==null||v.blur():e&&!f.value&&((x=c.value)==null||x.focus())}});return O(c,()=>{p.value=i},{immediate:!0,flush:"post"}),{focused:p}}function de(t,d){let i=-1;d=d.toLowerCase().trim(),t=t.toLowerCase();for(let o=0;o<d.length;o++)if(!~(i=t.indexOf(d[o],i+1)))return!1;return!0}const pe=t=>(te("data-v-5a0dbf31"),t=t(),oe(),t),fe=["for"],ve={class:"combobox__wrapper"},me=["aria-expanded","aria-owns"],be=["id","value","placeholder","aria-activedescendant"],xe=pe(()=>h("span",{class:"sr-only"},"Clear",-1)),ye=["id","aria-multiselectable"],we=["id","aria-selected","data-value","onClick"],_e={key:0,class:"combobox__tickbox"},ge=J({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:t=>!/\s/g.test(t)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions","focus"],setup(t,{emit:d}){var $;const i=d,o=t,f=_(!1),c=_(!1),p=_(0),e=_(""),v=_(($=e.value.split(",").at(-1))==null?void 0:$.trim()),x=_(null);re(x,()=>r()),O(()=>o.value,()=>{y()}),O(()=>e.value,()=>{var a;v.value=(a=e.value.split(",").at(-1))==null?void 0:a.trim()}),R(()=>{y()});function y(){o.value&&o.value.length>0?(e.value=o.options.filter(a=>o.value.includes(a)).map(a=>a.text).join(", "),o.multiselectable||(e.value=e.value.split(",")[0].trim(),p.value=o.options.indexOf(o.options.find(a=>a.text===e.value)))):e.value="",i("selectedOptions",e.value.split(",").map(a=>a.trim()).filter(Boolean))}function w(){e.value="",i("selectedOptions",[])}function s(){if(f.value){f.value=!1,ce(document.getElementById(o.id),{initialValue:!0});return}r()}function r(){c.value=!1,p.value=0,document.getElementById(`${o.id}-listbox`).scrollTop=0;const a=e.value.split(",").map(u=>u.trim()),n=[...o.options.map(u=>u.text.toLowerCase()),...o.options.map(u=>u.value.toLowerCase())];for(const u of a)n.includes(u.toLowerCase())?e.value=e.value.replace(u,o.options.find(l=>l.text.toLowerCase()===u.toLowerCase()||l.value.toLowerCase()===u.toLowerCase()).text):e.value=e.value.replace(u,"");e.value=e.value.split(",").map(u=>u.trim()).filter(Boolean).join(", "),i("selectedOptions",e.value.split(",").map(u=>u.trim()).filter(Boolean))}function m(a){e.value=a.target.value;const n=e.value.split(",").map(l=>l.trim().toLowerCase()),u=[...o.options.map(l=>l.text.toLowerCase()),...o.options.map(l=>l.value.toLowerCase())];for(const l of n)u.includes(l)?(e.value=e.value.replace(l,o.options.find(b=>b.text.toLowerCase()===l||b.value.toLowerCase()===l).text),i("selectedOptions",e.value.split(",").map(b=>b.trim()).filter(Boolean))):i("selectedOptions",e.value.toLowerCase().replace(l,"").split(",").map(b=>b.trim()).filter(Boolean))}function H(a){const n=o.options.length-1,u=()=>{const l=document.getElementById(`${o.id}-listbox`),b=document.getElementById(`${o.id}-option-${p.value}`);l.scrollTop=b.offsetTop-l.clientHeight/2+b.clientHeight/2};switch(c.value||(c.value=!0),a.key){case"ArrowDown":a.preventDefault(),p.value!==n&&(p.value++,u());break;case"ArrowUp":a.preventDefault(),p.value!==0&&(p.value--,u());break;case"Enter":a.preventDefault(),E(o.options[p.value])}}function E(a){p.value=o.options.indexOf(a),o.multiselectable?I(a)?(e.value=e.value.replace(a.text,"").split(",").map(n=>n.trim()).filter(Boolean).join(", "),e.value.split(",").map(n=>n.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),a.text].map(n=>n.trim()).filter(Boolean).join(", ")+", ":(c.value=!1,e.value=[...e.value.split(","),a.text].map(n=>n.trim()).join(", ")),i("selectedOptions",e.value.split(",").map(n=>n.trim()).filter(Boolean))}function I(a){return e.value.split(",").map(n=>n.trim()).includes(a.text)}function T(a){return o.options[p.value]===a}return(a,n)=>{const u=ee;return g(),k("div",{ref_key:"combobox",ref:x,class:"combobox"},[h("label",{for:t.id,class:"sr-only"},S(t.label),9,fe),h("div",ve,[h("div",{class:V(["combobox__header",{"combobox__header--open":c.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${c.value}`,"aria-owns":`${t.id}-listbox`},[h("input",{id:t.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:t.label,"aria-activedescendant":`${t.id}-option-${p.value}`,onClick:n[0]||(n[0]=l=>!!e.value&&!!e.value.split(",").map(b=>b.trim()).at(-1)&&(e.value+=", ")),onFocus:n[1]||(n[1]=l=>{c.value=!0,i("focus")}),onBlur:s,onInput:n[2]||(n[2]=l=>m(l)),onKeydown:n[3]||(n[3]=l=>H(l))},null,40,be),e.value?(g(),k("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:n[4]||(n[4]=l=>w())},[j(u,{name:"cross"}),xe])):(g(),U(u,{key:0,class:"combobox__header-icon combobox__chevron",name:"chevron_down"}))],10,me),D(h("div",{id:`${t.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${t.multiselectable}`},[(g(!0),k(Q,null,X(t.options,(l,b)=>D((g(),k("div",{id:`${t.id}-option-${b}`,key:l.value,class:V(["combobox__option",{"combobox__option--selected":I(l),"combobox__option--current":T(l)}]),role:"option","aria-selected":`${I(l)}`,"data-value":l.value,onClick:W=>E(l),onMousedown:n[5]||(n[5]=W=>f.value=!0)},[t.multiselectable?(g(),k("div",_e,[j(u,{name:"tick"})])):Y("",!0),Z(" "+S(l.text),1)],42,we)),[[F,N(de)(l.text,v.value||"")]])),128))],8,ye),[[F,c.value]])])],512)}}});const Ce=le(ge,[["__scopeId","data-v-5a0dbf31"]]);export{Ce as default};
