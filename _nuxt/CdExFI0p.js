import{f as K,Q as A,R as O,S as b,T as c,K as j,y as S,U as R,V as T,x as N,W as B,X as h,Y as x,Z as L,$ as C,a0 as I,a1 as E,a2 as F,F as w,a3 as V,a4 as q,a5 as Q,_ as U,E as W,o as X}from"./Dnyl59BH.js";const Y=K({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const o=e.renderKey,n=e.route,i={};for(const a in e.route)Object.defineProperty(i,a,{get:()=>o===e.renderKey?e.route[a]:n[a],enumerable:!0});return A(b,O(i)),()=>c(e.vnode,{ref:e.vnodeRef})}}),Z=K({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:o,slots:n,expose:i}){const a=j(),r=S(),s=R(b,null);let u;i({pageRef:r});const d=R(T,null);let l;const g=a.deferHydration();if(a.isHydrating){const t=a.hooks.hookOnce("app:error",g);N().beforeEach(t)}e.pageKey&&B(()=>e.pageKey,(t,m)=>{t!==m&&a.callHook("page:loading:start")});let y=!1;return()=>c(V,{name:e.name,route:e.route,...o},{default:t=>{const m=z(s,t.route,t.Component),p=s&&s.matched.length===t.route.matched.length;if(!t.Component){if(l&&!p)return l;g();return}if(l&&d&&!d.isCurrent(t.route))return l;if(m&&s&&(!d||d!=null&&d.isCurrent(s)))return p?l:null;const f=h(t,e.pageKey);!a.isHydrating&&!D(s,t.route,t.Component)&&u===f&&(a.callHook("page:loading:end"),y=!0),u=f;const v=!!(e.transition??t.route.meta.pageTransition??x),H=v&&$([e.transition,t.route.meta.pageTransition,x,{onAfterLeave:()=>{a.callHook("page:transition:finish",t.Component)}}].filter(Boolean)),k=e.keepalive??t.route.meta.keepalive??L;return l=C(v&&H,I(k,c(E,{suspensible:!0,onPending:()=>a.callHook("page:start",t.Component),onResolve:()=>{F(()=>a.callHook("page:finish",t.Component).then(()=>{if(!y)return a.callHook("page:loading:end");y=!1}).finally(g))}},{default:()=>{const _=c(Y,{key:f||void 0,vnode:n.default?c(w,void 0,n.default(t)):t.Component,route:t.route,renderKey:f||void 0,trackRootNodes:v,vnodeRef:r});return k&&(_.type.name=t.Component.type.name||t.Component.type.__name||"RouteProvider"),_}}))).default(),l}})}});function $(e){const o=e.map(n=>({...n,onAfterLeave:n.onAfterLeave?q(n.onAfterLeave):void 0}));return Q(...o)}function z(e,o,n){if(!e)return!1;const i=o.matched.findIndex(a=>{var r;return((r=a.components)==null?void 0:r.default)===(n==null?void 0:n.type)});return!i||i===-1?!1:o.matched.slice(0,i).some((a,r)=>{var s,u,d;return((s=a.components)==null?void 0:s.default)!==((d=(u=e.matched[r])==null?void 0:u.components)==null?void 0:d.default)})||n&&h({route:o,Component:n})!==h({route:e,Component:n})}function D(e,o,n){return e?o.matched.findIndex(a=>{var r;return((r=a.components)==null?void 0:r.default)===(n==null?void 0:n.type)})<o.matched.length-1:!1}const G={};function J(e,o){const n=Z;return X(),W(n)}const P=U(G,[["render",J]]);export{P as default};
