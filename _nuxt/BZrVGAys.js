const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DkRPkyXk.js","./BQZeWf9W.js","./entry.DMTm4W7i.css","./ComboboxInput.BF18TJlo.css"])))=>i.map(i=>d[i]);
import{f as I,h as P,x as E,y,i as N,j as V,o as u,c,b as v,k as d,l as D,a as i,F as C,r as x,m as z,z as R,A as T,w as q,B as G,t as p,n as A,C as H,D as J,e as K,_ as Q}from"./BQZeWf9W.js";import{_ as U}from"./CN2Qb3ZG.js";const W={class:"container"},X={key:0},Z={class:"posts"},ee={class:"post__article"},te={key:0,class:"post__banner"},se={class:"post__details"},le={class:"post__tags"},oe={class:"post__title"},ie={class:"post__description"},ae={class:"post__date"},ne=["datetime"],re=I({__name:"ArticleList",props:{limit:{type:Number,default:void 0,validator(r){return r>=0&&r<=1e3}},preloadArticleImages:{type:Number,default:0,validator(r){return r>=0}},showFilter:{type:Boolean,default:!1},suggested:{type:Object,default:{current:"",titles:[],tags:[]}}},async setup(r){let f,b;const F=H(()=>J(()=>import("./DkRPkyXk.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),_=P(),L=E(),g=y([]),s=r,{data:Y}=([f,b]=N(()=>z(`article-list-${_.params.slug}`,e=>e.$contentful.getEntries({content_type:"article",limit:1e3,order:["-fields.publishDate"],select:["fields.title","fields.description","fields.image","fields.tags","fields.publishDate","fields.slug"]}))),f=await f,b(),f),a=V(Y.value.items),o=y([]);if(s.suggested.current){if(a.splice(a.indexOf(a.filter(e=>e.fields.title===s.suggested.current)[0]),1),s.suggested.titles.length>0){const e=a.filter(t=>s.suggested.titles.includes(t.fields.title));for(const t of e)o.value.includes(t)||o.value.push(t)}if(!s.limit||o.value.length<s.limit)for(const e of s.suggested.tags){const t=a.filter(n=>n.fields.tags.includes(e));for(const n of t)o.value.includes(n)||o.value.push(n)}if(!s.limit||o.value.length<s.limit)for(const e of a)o.value.includes(e)||o.value.push(e)}else o.value=[...a];s.limit&&s.limit<=o.value.length&&(o.value.length=s.limit);const k=[...new Set(a.map(e=>e.fields.tags.join(",")).join(",").split(","))].filter(Boolean).sort(),B=[...new Set(a.map(e=>`${new Date(e.fields.publishDate).getFullYear()}`))].filter(Boolean),w=[...k.map(e=>({value:e,text:e})),...B.map(e=>({value:e,text:e}))],$=(_.query.filters?_.query.filters.split(",").map(e=>w.find(t=>t.value.toLowerCase()===e.toLowerCase()||t.text.toLowerCase()===e.toLowerCase())):[]).filter(Boolean);function M(e){if(!g.value.length||!e.fields.tags.length)return!0;for(const t of g.value)if(e.fields.tags.map(n=>n.toLowerCase()).includes(t.toLowerCase())||`${new Date(e.fields.publishDate).getFullYear()}`===t)return!0;return!1}function O(e){g.value=e,L.replace({query:{filters:e.length?e.join(",").toLowerCase():void 0}})}function S(){const m=document.getElementById("filter").getBoundingClientRect().top+window.scrollY-72;window.scrollTo({top:m,behavior:"smooth"})}return(e,t)=>{const n=U,m=K;return u(),c("div",W,[r.showFilter?(u(),c("div",X,[v(d(F),{id:"filter",label:"Filters",multiselectable:!0,value:d($),options:w,class:"filter",onSelectedOptions:t[0]||(t[0]=l=>O(l)),onFocus:t[1]||(t[1]=l=>S())},null,8,["value"])])):D("",!0),i("ul",Z,[(u(!0),c(C,null,x(d(o),(l,j)=>R((u(),c("li",{key:l.sys.id},[v(m,{to:`/blog/${new Date(l.fields.publishDate).getFullYear()}/${l.fields.slug}`,class:"post"},{default:q(()=>[i("article",ee,[s.suggested.titles.includes(l.fields.title)?(u(),c("p",te,"Suggested")):D("",!0),v(n,{class:"post__img",provider:"contentful",src:l.fields.image.fields.file.url,alt:l.fields.image.fields.description,width:"424",height:"223",sizes:"4kdesktop:424px",loading:"lazy",preload:j<=s.preloadArticleImages},null,8,["src","alt","preload"]),i("div",se,[i("ul",le,[(u(!0),c(C,null,x(l.fields.tags,h=>(u(),c("li",{key:h,class:G(["tag",{"tag--bold":s.suggested.tags.includes(h)}])},p(h),3))),128))]),i("h2",oe,p(l.fields.title),1),i("p",ie,p(l.fields.description),1),i("footer",null,[i("p",ae,[t[2]||(t[2]=i("span",{class:"sr-only"},"Publish date:",-1)),i("time",{datetime:d(A)(new Date(l.fields.publishDate)).format("YYYY-MM-DD")},p(d(A)(new Date(l.fields.publishDate)).format("MMMM D, YYYY")),9,ne)])])])])]),_:2},1032,["to"])])),[[T,M(l)]])),128))])])}}}),de=Q(re,[["__scopeId","data-v-b1c45b84"]]);export{de as A};
