import{f as b,a4 as k,z,J as n,R as x,a5 as L,c as E,Q as I,o as S,a6 as _,h as u,a7 as B,j as C,s as N,a8 as P,a9 as R,G as U,aa as W}from"./CHVYKOZp.js";import{i as $,u as j,a as q,m as D,c as w}from"./BskWyfGG.js";const F=["src"],G=b({__name:"NuxtImg",props:$,emits:["load","error"],setup(p,{emit:t}){const s=p,a=k(),i=t,f=!1,h=j(),o=q(s),c=z(!1),l=z(),d=n(()=>h.getSizes(s.src,{...o.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...o.modifiers.value,width:w(s.width),height:w(s.height)}})),g=n(()=>{const e={...o.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=d.value.sizes,e.srcset=d.value.srcset),e}),m=n(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const r=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return h(s.src,{...o.modifiers.value,width:r[0],height:r[1],quality:r[2]||50,blur:r[3]||3},o.options.value)}),v=n(()=>s.sizes?d.value.src:h(s.src,o.modifiers.value,o.options.value)),y=n(()=>m.value?m.value:v.value),A=x().isHydrating;return L(()=>{if(m.value||s.custom){const e=new Image;v.value&&(e.src=v.value),s.sizes&&(e.sizes=d.value.sizes||"",e.srcset=d.value.srcset),e.onload=r=>{c.value=!0,i("load",r)},e.onerror=r=>{i("error",r)},D("nuxt-image");return}l.value&&(l.value.complete&&A&&(l.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),l.value.onload=e=>{i("load",e)},l.value.onerror=e=>{i("error",e)})}),(e,r)=>e.custom?I(e.$slots,"default",B(_({key:1},{...u(f)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...g.value,...u(a)},isLoaded:c.value,src:y.value}))):(S(),E("img",_({key:0,ref_key:"imgEl",ref:l,class:m.value&&!c.value?e.placeholderClass:void 0},{...u(f)?{onerror:"this.setAttribute('data-error', 1)"}:{},...g.value,...u(a)},{src:y.value}),null,16,F))}}),Q={__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(p){const t=p,s=n(()=>{if(t.src?.startsWith("/")&&!t.src.startsWith("//")){const a=P(R(U().app.baseURL));if(a!=="/"&&!t.src.startsWith(a))return W(a,t.src)}return t.src});return(a,i)=>(S(),C(N(u(G)),{src:u(s),alt:t.alt,width:t.width,height:t.height},null,8,["src","alt","width","height"]))}};export{Q as default};
