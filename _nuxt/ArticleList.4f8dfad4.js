import{g as S,i as M,z as E,A as P,j,k as N,o as a,c as i,b as g,l as n,m as V,a as l,F as b,v as y,n as q,B as O,C as R,w as T,t as u,q as D,D as z,E as G,e as H,p as J,f as K,_ as Q}from"./entry.0cfec9c0.js";import{_ as U}from"./nuxt-picture.975e35de.js";const W=o=>(J("data-v-d02d84a9"),o=o(),K(),o),X={key:0,class:"container"},Z={class:"posts container"},ee={class:"post__article"},te={class:"post__details"},se={class:"post__tags"},oe={class:"post__title"},le={class:"post__description"},ae={class:"post__date"},ie=W(()=>l("span",{class:"sr-only"},"Publish date:",-1)),ne=["datetime"],re=S({__name:"ArticleList",props:{limit:{type:Number,default:void 0,validator(o){return o>=0&&o<=1e3}},preloadArticleImages:{type:Number,default:0,validator(o){return o>=0}},showFilter:{type:Boolean,defailt:!1}},async setup(o){let r,h;const C=z(()=>G(()=>import("./ComboboxInput.b26e9a22.js"),["./ComboboxInput.b26e9a22.js","./entry.0cfec9c0.js","./entry.22896276.css","./ComboboxInput.0190ed27.css"],import.meta.url)),p=M(),x=E(),_=P([]),f=o,{data:F}=([r,h]=j(()=>q(`article-list-${p.params.slug}`,e=>e.$contentful.getEntries({content_type:"article",limit:1e3,order:"-fields.publishDate",select:["fields.title","fields.description","fields.image","fields.tags","fields.publishDate","fields.slug"]}))),r=await r,h(),r),c=N(F.value.items);f.limit&&(c.length=f.limit);const L=[...new Set(c.map(e=>e.fields.tags.join(",")).join(",").split(","))].filter(Boolean).sort(),Y=[...new Set(c.map(e=>`${new Date(e.fields.publishDate).getFullYear()}`))].filter(Boolean),w=[...L.map(e=>({value:e,text:e})),...Y.map(e=>({value:e,text:e}))],A=(p.query.filters?p.query.filters.split(",").map(e=>w.find(s=>s.value.toLowerCase()===e.toLowerCase()||s.text.toLowerCase()===e.toLowerCase())):[]).filter(Boolean);function B(e){if(!_.value.length||!e.fields.tags.length)return!0;for(const s of _.value)if(e.fields.tags.map(d=>d.toLowerCase()).includes(s.toLowerCase())||`${new Date(e.fields.publishDate).getFullYear()}`===s)return!0;return!1}function $(e){_.value=e,x.replace({query:{filters:e.length?e.join(",").toLowerCase():void 0}})}function k(){const e=document.getElementById("filter"),s=72,m=e.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:m,behavior:"smooth"})}return(e,s)=>{const d=U,m=H;return a(),i("div",null,[o.showFilter?(a(),i("div",X,[g(n(C),{id:"filter",label:"Filters",multiselectable:!0,value:n(A),options:w,class:"filter",onSelectedOptions:s[0]||(s[0]=t=>$(t)),onFocus:s[1]||(s[1]=t=>k())},null,8,["value"])])):V("",!0),l("ul",Z,[(a(!0),i(b,null,y(n(c),(t,I)=>O((a(),i("li",{key:t.sys.id},[g(m,{to:`/blog/${new Date(t.fields.publishDate).getFullYear()}/${t.fields.slug}`,class:"post"},{default:T(()=>[l("article",ee,[g(d,{class:"post__img",provider:"contentful",src:t.fields.image.fields.file.url,alt:t.fields.image.fields.description,width:"424",height:"223",sizes:"4kdesktop:424px",loading:"lazy",preload:I<=f.preloadArticleImages},null,8,["src","alt","preload"]),l("div",te,[l("ul",se,[(a(!0),i(b,null,y(t.fields.tags,v=>(a(),i("li",{key:v,class:"tag"},u(v),1))),128))]),l("h2",oe,u(t.fields.title),1),l("p",le,u(t.fields.description),1),l("footer",null,[l("p",ae,[ie,l("time",{datetime:n(D)(new Date(t.fields.publishDate)).format("YYYY-MM-DD")},u(n(D)(new Date(t.fields.publishDate)).format("MMMM D, YYYY")),9,ne)])])])])]),_:2},1032,["to"])])),[[R,B(t)]])),128))])])}}});const ue=Q(re,[["__scopeId","data-v-d02d84a9"]]);export{ue as A};
