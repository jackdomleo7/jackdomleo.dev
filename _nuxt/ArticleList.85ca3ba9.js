import{g as E,i as O,z as P,A as y,j as N,k as V,o as u,c,b as v,l as d,m as D,a,F as C,v as x,n as q,B as z,C as R,w as T,D as G,t as p,q as A,E as H,G as J,e as K,p as Q,f as U,_ as W}from"./entry.2cafa41d.js";import{_ as X}from"./nuxt-picture.63a6fe22.js";const Z=i=>(Q("data-v-6ead1714"),i=i(),U(),i),ee={class:"container"},te={key:0},se={class:"posts"},le={class:"post__article"},oe={key:0,class:"post__banner"},ie={class:"post__details"},ae={class:"post__tags"},ne={class:"post__title"},re={class:"post__description"},ue={class:"post__date"},ce=Z(()=>a("span",{class:"sr-only"},"Publish date:",-1)),de=["datetime"],fe=E({__name:"ArticleList",props:{limit:{type:Number,default:void 0,validator(i){return i>=0&&i<=1e3}},preloadArticleImages:{type:Number,default:0,validator(i){return i>=0}},showFilter:{type:Boolean,default:!1},suggested:{type:Object,default:{current:"",titles:[],tags:[]}}},async setup(i){let f,w;const L=H(()=>J(()=>import("./ComboboxInput.a9126c15.js"),["./ComboboxInput.a9126c15.js","./entry.2cafa41d.js","./entry.22896276.css","./ComboboxInput.0190ed27.css"],import.meta.url)),_=O(),F=P(),g=y([]),s=i,{data:Y}=([f,w]=N(()=>q(`article-list-${_.params.slug}`,e=>e.$contentful.getEntries({content_type:"article",limit:1e3,order:["-fields.publishDate"],select:["fields.title","fields.description","fields.image","fields.tags","fields.publishDate","fields.slug"]}))),f=await f,w(),f),n=V(Y.value.items),o=y([]);if(s.suggested.current){if(n.splice(n.indexOf(n.filter(e=>e.fields.title===s.suggested.current)[0]),1),s.suggested.titles.length>0){const e=n.filter(t=>s.suggested.titles.includes(t.fields.title));for(const t of e)o.value.includes(t)||o.value.push(t)}if(!s.limit||o.value.length<s.limit)for(const e of s.suggested.tags){const t=n.filter(r=>r.fields.tags.includes(e));for(const r of t)o.value.includes(r)||o.value.push(r)}if(!s.limit||o.value.length<s.limit)for(const e of n)o.value.includes(e)||o.value.push(e)}else o.value=[...n];s.limit&&s.limit<=o.value.length&&(o.value.length=s.limit);const k=[...new Set(n.map(e=>e.fields.tags.join(",")).join(",").split(","))].filter(Boolean).sort(),B=[...new Set(n.map(e=>`${new Date(e.fields.publishDate).getFullYear()}`))].filter(Boolean),b=[...k.map(e=>({value:e,text:e})),...B.map(e=>({value:e,text:e}))],S=(_.query.filters?_.query.filters.split(",").map(e=>b.find(t=>t.value.toLowerCase()===e.toLowerCase()||t.text.toLowerCase()===e.toLowerCase())):[]).filter(Boolean);function $(e){if(!g.value.length||!e.fields.tags.length)return!0;for(const t of g.value)if(e.fields.tags.map(r=>r.toLowerCase()).includes(t.toLowerCase())||`${new Date(e.fields.publishDate).getFullYear()}`===t)return!0;return!1}function I(e){g.value=e,F.replace({query:{filters:e.length?e.join(",").toLowerCase():void 0}})}function M(){const e=document.getElementById("filter"),t=72,m=e.getBoundingClientRect().top+window.scrollY-t;window.scrollTo({top:m,behavior:"smooth"})}return(e,t)=>{const r=X,m=K;return u(),c("div",ee,[i.showFilter?(u(),c("div",te,[v(d(L),{id:"filter",label:"Filters",multiselectable:!0,value:d(S),options:b,class:"filter",onSelectedOptions:t[0]||(t[0]=l=>I(l)),onFocus:t[1]||(t[1]=l=>M())},null,8,["value"])])):D("",!0),a("ul",se,[(u(!0),c(C,null,x(d(o),(l,j)=>z((u(),c("li",{key:l.sys.id},[v(m,{to:`/blog/${new Date(l.fields.publishDate).getFullYear()}/${l.fields.slug}`,class:"post"},{default:T(()=>[a("article",le,[s.suggested.titles.includes(l.fields.title)?(u(),c("p",oe,"Suggested")):D("",!0),v(r,{class:"post__img",provider:"contentful",src:l.fields.image.fields.file.url,alt:l.fields.image.fields.description,width:"424",height:"223",sizes:"4kdesktop:424px",loading:"lazy",preload:j<=s.preloadArticleImages},null,8,["src","alt","preload"]),a("div",ie,[a("ul",ae,[(u(!0),c(C,null,x(l.fields.tags,h=>(u(),c("li",{key:h,class:G(["tag",{"tag--bold":s.suggested.tags.includes(h)}])},p(h),3))),128))]),a("h2",ne,p(l.fields.title),1),a("p",re,p(l.fields.description),1),a("footer",null,[a("p",ue,[ce,a("time",{datetime:d(A)(new Date(l.fields.publishDate)).format("YYYY-MM-DD")},p(d(A)(new Date(l.fields.publishDate)).format("MMMM D, YYYY")),9,de)])])])])]),_:2},1032,["to"])])),[[R,$(l)]])),128))])])}}});const ge=W(fe,[["__scopeId","data-v-6ead1714"]]);export{ge as A};
