const __vite__fileDeps=["./Cp9N9mKi.js","./BF42aEWT.js","./entry.BJDZ90qu.css","./ComboboxInput.CSTFb3cV.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{g as j,i as E,z as P,A as y,j as N,k as V,o as c,c as u,b as v,l as d,m as D,a,F as C,v as x,n as q,B as z,C as R,w as T,D as G,t as p,q as A,E as H,G as J,e as K,p as Q,f as U,_ as W}from"./BF42aEWT.js";import{_ as X}from"./CZ3dMZu-.js";const Z=i=>(Q("data-v-0527cd05"),i=i(),U(),i),ee={class:"container"},te={key:0},se={class:"posts"},le={class:"post__article"},oe={key:0,class:"post__banner"},ie={class:"post__details"},ae={class:"post__tags"},ne={class:"post__title"},re={class:"post__description"},ce={class:"post__date"},ue=Z(()=>a("span",{class:"sr-only"},"Publish date:",-1)),de=["datetime"],fe=j({__name:"ArticleList",props:{limit:{type:Number,default:void 0,validator(i){return i>=0&&i<=1e3}},preloadArticleImages:{type:Number,default:0,validator(i){return i>=0}},showFilter:{type:Boolean,default:!1},suggested:{type:Object,default:{current:"",titles:[],tags:[]}}},async setup(i){let f,b;const F=H(()=>J(()=>import("./Cp9N9mKi.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),_=E(),L=P(),g=y([]),s=i,{data:Y}=([f,b]=N(()=>q(`article-list-${_.params.slug}`,e=>e.$contentful.getEntries({content_type:"article",limit:1e3,order:["-fields.publishDate"],select:["fields.title","fields.description","fields.image","fields.tags","fields.publishDate","fields.slug"]}))),f=await f,b(),f),n=V(Y.value.items),o=y([]);if(s.suggested.current){if(n.splice(n.indexOf(n.filter(e=>e.fields.title===s.suggested.current)[0]),1),s.suggested.titles.length>0){const e=n.filter(t=>s.suggested.titles.includes(t.fields.title));for(const t of e)o.value.includes(t)||o.value.push(t)}if(!s.limit||o.value.length<s.limit)for(const e of s.suggested.tags){const t=n.filter(r=>r.fields.tags.includes(e));for(const r of t)o.value.includes(r)||o.value.push(r)}if(!s.limit||o.value.length<s.limit)for(const e of n)o.value.includes(e)||o.value.push(e)}else o.value=[...n];s.limit&&s.limit<=o.value.length&&(o.value.length=s.limit);const k=[...new Set(n.map(e=>e.fields.tags.join(",")).join(",").split(","))].filter(Boolean).sort(),B=[...new Set(n.map(e=>`${new Date(e.fields.publishDate).getFullYear()}`))].filter(Boolean),w=[...k.map(e=>({value:e,text:e})),...B.map(e=>({value:e,text:e}))],S=(_.query.filters?_.query.filters.split(",").map(e=>w.find(t=>t.value.toLowerCase()===e.toLowerCase()||t.text.toLowerCase()===e.toLowerCase())):[]).filter(Boolean);function $(e){if(!g.value.length||!e.fields.tags.length)return!0;for(const t of g.value)if(e.fields.tags.map(r=>r.toLowerCase()).includes(t.toLowerCase())||`${new Date(e.fields.publishDate).getFullYear()}`===t)return!0;return!1}function I(e){g.value=e,L.replace({query:{filters:e.length?e.join(",").toLowerCase():void 0}})}function M(){const m=document.getElementById("filter").getBoundingClientRect().top+window.scrollY-72;window.scrollTo({top:m,behavior:"smooth"})}return(e,t)=>{const r=X,m=K;return c(),u("div",ee,[i.showFilter?(c(),u("div",te,[v(d(F),{id:"filter",label:"Filters",multiselectable:!0,value:d(S),options:w,class:"filter",onSelectedOptions:t[0]||(t[0]=l=>I(l)),onFocus:t[1]||(t[1]=l=>M())},null,8,["value"])])):D("",!0),a("ul",se,[(c(!0),u(C,null,x(d(o),(l,O)=>z((c(),u("li",{key:l.sys.id},[v(m,{to:`/blog/${new Date(l.fields.publishDate).getFullYear()}/${l.fields.slug}`,class:"post"},{default:T(()=>[a("article",le,[s.suggested.titles.includes(l.fields.title)?(c(),u("p",oe,"Suggested")):D("",!0),v(r,{class:"post__img",provider:"contentful",src:l.fields.image.fields.file.url,alt:l.fields.image.fields.description,width:"424",height:"223",sizes:"4kdesktop:424px",loading:"lazy",preload:O<=s.preloadArticleImages},null,8,["src","alt","preload"]),a("div",ie,[a("ul",ae,[(c(!0),u(C,null,x(l.fields.tags,h=>(c(),u("li",{key:h,class:G(["tag",{"tag--bold":s.suggested.tags.includes(h)}])},p(h),3))),128))]),a("h2",ne,p(l.fields.title),1),a("p",re,p(l.fields.description),1),a("footer",null,[a("p",ce,[ue,a("time",{datetime:d(A)(new Date(l.fields.publishDate)).format("YYYY-MM-DD")},p(d(A)(new Date(l.fields.publishDate)).format("MMMM D, YYYY")),9,de)])])])])]),_:2},1032,["to"])])),[[R,$(l)]])),128))])])}}}),ge=W(fe,[["__scopeId","data-v-0527cd05"]]);export{ge as A};
