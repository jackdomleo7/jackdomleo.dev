import{N as S,a4 as K,a0 as G,a1 as H,K as j,V as h,h as W,f as U,A as k,ao as J,c as $,o as O,a as _,t as M,C as P,E as T,j as Q,b as D,i as X,D as F,F as Y,r as Z,k as ee,d as te,_ as oe}from"./TfkW-1t6.js";function le(t){return K()?(G(t),!0):!1}const q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ne=Object.prototype.toString,ae=t=>ne.call(t)==="[object Object]",B=()=>{},ie=se();function se(){var t,d;return q&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((d=window?.navigator)==null?void 0:d.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function V(t){return Array.isArray(t)?t:[t]}function ue(t,d,r){return S(t,d,{...r,immediate:!0})}const R=q?window:void 0;function E(t){var d;const r=h(t);return(d=r?.$el)!=null?d:r}function I(...t){const d=[],r=()=>{d.forEach(e=>e()),d.length=0},o=(e,s,v,m)=>(e.addEventListener(s,v,m),()=>e.removeEventListener(s,v,m)),w=j(()=>{const e=V(h(t[0])).filter(s=>s!=null);return e.every(s=>typeof s!="string")?e:void 0}),p=ue(()=>{var e,s;return[(s=(e=w.value)==null?void 0:e.map(v=>E(v)))!=null?s:[R].filter(v=>v!=null),V(h(w.value?t[1]:t[0])),V(W(w.value?t[2]:t[1])),h(w.value?t[3]:t[2])]},([e,s,v,m])=>{if(r(),!e?.length||!s?.length||!v?.length)return;const y=ae(m)?{...m}:m;d.push(...e.flatMap(C=>s.flatMap(g=>v.map(L=>o(C,g,L,y)))))},{flush:"post"}),f=()=>{p(),r()};return le(r),f}let N=!1;function re(t,d,r={}){const{window:o=R,ignore:w=[],capture:p=!0,detectIframe:f=!1,controls:e=!1}=r;if(!o)return e?{stop:B,cancel:B,trigger:B}:B;if(ie&&!N){N=!0;const n={passive:!0};Array.from(o.document.body.children).forEach(u=>u.addEventListener("click",B,n)),o.document.documentElement.addEventListener("click",B,n)}let s=!0;const v=n=>h(w).some(u=>{if(typeof u=="string")return Array.from(o.document.querySelectorAll(u)).some(b=>b===n.target||n.composedPath().includes(b));{const b=E(u);return b&&(n.target===b||n.composedPath().includes(b))}});function m(n){const u=h(n);return u&&u.$.subTree.shapeFlag===16}function y(n,u){const b=h(n),i=b.$.subTree&&b.$.subTree.children;return i==null||!Array.isArray(i)?!1:i.some(l=>l.el===u.target||u.composedPath().includes(l.el))}const C=n=>{const u=E(t);if(n.target!=null&&!(!(u instanceof Element)&&m(t)&&y(t,n))&&!(!u||u===n.target||n.composedPath().includes(u))){if("detail"in n&&n.detail===0&&(s=!v(n)),!s){s=!0;return}d(n)}};let g=!1;const L=[I(o,"click",n=>{g||(g=!0,setTimeout(()=>{g=!1},0),C(n))},{passive:!0,capture:p}),I(o,"pointerdown",n=>{const u=E(t);s=!v(n)&&!!(u&&!n.composedPath().includes(u))},{passive:!0}),f&&I(o,"blur",n=>{setTimeout(()=>{var u;const b=E(t);((u=o.document.activeElement)==null?void 0:u.tagName)==="IFRAME"&&!b?.contains(o.document.activeElement)&&d(n)},0)},{passive:!0})].filter(Boolean),A=()=>L.forEach(n=>n());return e?{stop:A,cancel:()=>{s=!1},trigger:n=>{s=!0,C(n),s=!1}}:A}function ce(t,d={}){const{initialValue:r=!1,focusVisible:o=!1,preventScroll:w=!1}=d,p=H(!1),f=j(()=>E(t)),e={passive:!0};I(f,"focus",v=>{var m,y;(!o||(y=(m=v.target).matches)!=null&&y.call(m,":focus-visible"))&&(p.value=!0)},e),I(f,"blur",()=>p.value=!1,e);const s=j({get:()=>p.value,set(v){var m,y;!v&&p.value?(m=f.value)==null||m.blur():v&&!p.value&&((y=f.value)==null||y.focus({preventScroll:w}))}});return S(f,()=>{s.value=r},{immediate:!0,flush:"post"}),{focused:s}}function de(t,d){let r=-1;d=d.toLowerCase().trim(),t=t.toLowerCase();for(let o=0;o<d.length;o++)if(!~(r=t.indexOf(d[o],r+1)))return!1;return!0}const fe=["for"],ve={class:"combobox__wrapper"},pe=["aria-expanded","aria-owns"],me=["id","value","placeholder","aria-activedescendant"],be=["id","aria-multiselectable"],xe=["id","aria-selected","data-value","onClick"],we={key:0,class:"combobox__tickbox"},ye=U({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:t=>!/\s/g.test(t)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions","focus"],setup(t,{emit:d}){const r=d,o=t,w=k(!1),p=k(!1),f=k(0),e=k(""),s=k(e.value.split(",").at(-1)?.trim()),v=k(null);re(v,()=>g()),S(()=>o.value,()=>{m()}),S(()=>e.value,()=>{s.value=e.value.split(",").at(-1)?.trim()}),J(()=>{m()});function m(){o.value&&o.value.length>0?(e.value=o.options.filter(i=>o.value.includes(i)).map(i=>i.text).join(", "),o.multiselectable||(e.value=e.value.split(",")[0].trim(),f.value=o.options.indexOf(o.options.find(i=>i.text===e.value)))):e.value="",r("selectedOptions",e.value.split(",").map(i=>i.trim()).filter(Boolean))}function y(){e.value="",r("selectedOptions",[])}function C(){if(w.value){w.value=!1,ce(document.getElementById(o.id),{initialValue:!0});return}g()}function g(){p.value=!1,f.value=0,document.getElementById(`${o.id}-listbox`).scrollTop=0;const i=e.value.split(",").map(c=>c.trim()),l=[...o.options.map(c=>c.text.toLowerCase()),...o.options.map(c=>c.value.toLowerCase())];for(const c of i)l.includes(c.toLowerCase())?e.value=e.value.replace(c,o.options.find(a=>a.text.toLowerCase()===c.toLowerCase()||a.value.toLowerCase()===c.toLowerCase()).text):e.value=e.value.replace(c,"");e.value=e.value.split(",").map(c=>c.trim()).filter(Boolean).join(", "),r("selectedOptions",e.value.split(",").map(c=>c.trim()).filter(Boolean))}function L(i){e.value=i.target.value;const l=e.value.split(",").map(a=>a.trim().toLowerCase()),c=[...o.options.map(a=>a.text.toLowerCase()),...o.options.map(a=>a.value.toLowerCase())];for(const a of l)c.includes(a)?(e.value=e.value.replace(a,o.options.find(x=>x.text.toLowerCase()===a||x.value.toLowerCase()===a).text),r("selectedOptions",e.value.split(",").map(x=>x.trim()).filter(Boolean))):r("selectedOptions",e.value.toLowerCase().replace(a,"").split(",").map(x=>x.trim()).filter(Boolean))}function A(i){const l=o.options.length-1,c=()=>{const a=document.getElementById(`${o.id}-listbox`),x=document.getElementById(`${o.id}-option-${f.value}`);a.scrollTop=x.offsetTop-a.clientHeight/2+x.clientHeight/2};switch(p.value||(p.value=!0),i.key){case"ArrowDown":i.preventDefault(),f.value!==l&&(f.value++,c());break;case"ArrowUp":i.preventDefault(),f.value!==0&&(f.value--,c());break;case"Enter":i.preventDefault(),n(o.options[f.value])}}function n(i){f.value=o.options.indexOf(i),o.multiselectable?u(i)?(e.value=e.value.replace(i.text,"").split(",").map(l=>l.trim()).filter(Boolean).join(", "),e.value.split(",").map(l=>l.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),i.text].map(l=>l.trim()).filter(Boolean).join(", ")+", ":(p.value=!1,e.value=[...e.value.split(","),i.text].map(l=>l.trim()).join(", ")),r("selectedOptions",e.value.split(",").map(l=>l.trim()).filter(Boolean))}function u(i){return e.value.split(",").map(l=>l.trim()).includes(i.text)}function b(i){return o.options[f.value]===i}return(i,l)=>{const c=X;return O(),$("div",{ref_key:"combobox",ref:v,class:"combobox"},[_("label",{for:t.id,class:"sr-only"},M(t.label),9,fe),_("div",ve,[_("div",{class:T(["combobox__header",{"combobox__header--open":p.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${p.value}`,"aria-owns":`${t.id}-listbox`},[_("input",{id:t.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:t.label,"aria-activedescendant":`${t.id}-option-${f.value}`,onClick:l[0]||(l[0]=a=>!!e.value&&!!e.value.split(",").map(x=>x.trim()).at(-1)&&(e.value+=", ")),onFocus:l[1]||(l[1]=a=>{p.value=!0,r("focus")}),onBlur:C,onInput:l[2]||(l[2]=a=>L(a)),onKeydown:l[3]||(l[3]=a=>A(a))},null,40,me),e.value?(O(),$("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:l[4]||(l[4]=a=>y())},[D(c,{name:"custom:cross",mode:"svg"}),l[6]||(l[6]=_("span",{class:"sr-only"},"Clear",-1))])):(O(),Q(c,{key:0,class:"combobox__header-icon combobox__chevron",name:"custom:chevron-down",mode:"svg"}))],10,pe),P(_("div",{id:`${t.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${t.multiselectable}`},[(O(!0),$(Y,null,Z(t.options,(a,x)=>P((O(),$("div",{id:`${t.id}-option-${x}`,key:a.value,class:T(["combobox__option",{"combobox__option--selected":u(a),"combobox__option--current":b(a)}]),role:"option","aria-selected":`${u(a)}`,"data-value":a.value,onClick:z=>n(a),onMousedown:l[5]||(l[5]=z=>w.value=!0)},[t.multiselectable?(O(),$("div",we,[D(c,{name:"custom:tick",mode:"svg"})])):ee("",!0),te(" "+M(a.text),1)],42,xe)),[[F,W(de)(a.text,s.value||"")]])),128))],8,be),[[F,p.value]])])],512)}}}),he=Object.assign(oe(ye,[["__scopeId","data-v-4595a861"]]),{__name:"ComboboxInput"});export{he as default};
