import{W as V,a6 as G,a7 as K,a8 as U,H as P,a9 as C,m as q,f as J,y as B,L as Q,c as A,o as _,a as $,t as T,A as j,D,E as X,b as F,v as Y,B as W,F as Z,s as ee,l as te,d as oe,_ as le}from"./C7Bf0Kcj.js";function ne(t){return G()?(K(t),!0):!1}const R=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ae=Object.prototype.toString,ie=t=>ae.call(t)==="[object Object]",L=()=>{},se=ue();function ue(){var t,d;return R&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((d=window==null?void 0:window.navigator)==null?void 0:d.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function M(t){return Array.isArray(t)?t:[t]}function re(t,d,r){return V(t,d,{...r,immediate:!0})}const z=R?window:void 0;function E(t){var d;const r=C(t);return(d=r==null?void 0:r.$el)!=null?d:r}function h(...t){const d=[],r=()=>{d.forEach(e=>e()),d.length=0},o=(e,s,v,m)=>(e.addEventListener(s,v,m),()=>e.removeEventListener(s,v,m)),w=P(()=>{const e=M(C(t[0])).filter(s=>s!=null);return e.every(s=>typeof s!="string")?e:void 0}),p=re(()=>{var e,s;return[(s=(e=w.value)==null?void 0:e.map(v=>E(v)))!=null?s:[z].filter(v=>v!=null),M(C(w.value?t[1]:t[0])),M(q(w.value?t[2]:t[1])),C(w.value?t[3]:t[2])]},([e,s,v,m])=>{if(r(),!(e!=null&&e.length)||!(s!=null&&s.length)||!(v!=null&&v.length))return;const y=ie(m)?{...m}:m;d.push(...e.flatMap(k=>s.flatMap(g=>v.map(I=>o(k,g,I,y)))))},{flush:"post"}),f=()=>{p(),r()};return ne(r),f}let N=!1;function ce(t,d,r={}){const{window:o=z,ignore:w=[],capture:p=!0,detectIframe:f=!1,controls:e=!1}=r;if(!o)return e?{stop:L,cancel:L,trigger:L}:L;if(se&&!N){N=!0;const l={passive:!0};Array.from(o.document.body.children).forEach(u=>h(u,"click",L,l)),h(o.document.documentElement,"click",L,l)}let s=!0;const v=l=>C(w).some(u=>{if(typeof u=="string")return Array.from(o.document.querySelectorAll(u)).some(b=>b===l.target||l.composedPath().includes(b));{const b=E(u);return b&&(l.target===b||l.composedPath().includes(b))}});function m(l){const u=C(l);return u&&u.$.subTree.shapeFlag===16}function y(l,u){const b=C(l),O=b.$.subTree&&b.$.subTree.children;return O==null||!Array.isArray(O)?!1:O.some(n=>n.el===u.target||u.composedPath().includes(n.el))}const k=l=>{const u=E(t);if(l.target!=null&&!(!(u instanceof Element)&&m(t)&&y(t,l))&&!(!u||u===l.target||l.composedPath().includes(u))){if("detail"in l&&l.detail===0&&(s=!v(l)),!s){s=!0;return}d(l)}};let g=!1;const I=[h(o,"click",l=>{g||(g=!0,setTimeout(()=>{g=!1},0),k(l))},{passive:!0,capture:p}),h(o,"pointerdown",l=>{const u=E(t);s=!v(l)&&!!(u&&!l.composedPath().includes(u))},{passive:!0}),f&&h(o,"blur",l=>{setTimeout(()=>{var u;const b=E(t);((u=o.document.activeElement)==null?void 0:u.tagName)==="IFRAME"&&!(b!=null&&b.contains(o.document.activeElement))&&d(l)},0)},{passive:!0})].filter(Boolean),S=()=>I.forEach(l=>l());return e?{stop:S,cancel:()=>{s=!1},trigger:l=>{s=!0,k(l),s=!1}}:S}function de(t,d={}){const{initialValue:r=!1,focusVisible:o=!1,preventScroll:w=!1}=d,p=U(!1),f=P(()=>E(t)),e={passive:!0};h(f,"focus",v=>{var m,y;(!o||(y=(m=v.target).matches)!=null&&y.call(m,":focus-visible"))&&(p.value=!0)},e),h(f,"blur",()=>p.value=!1,e);const s=P({get:()=>p.value,set(v){var m,y;!v&&p.value?(m=f.value)==null||m.blur():v&&!p.value&&((y=f.value)==null||y.focus({preventScroll:w}))}});return V(f,()=>{s.value=r},{immediate:!0,flush:"post"}),{focused:s}}function fe(t,d){let r=-1;d=d.toLowerCase().trim(),t=t.toLowerCase();for(let o=0;o<d.length;o++)if(!~(r=t.indexOf(d[o],r+1)))return!1;return!0}const ve=["for"],pe={class:"combobox__wrapper"},me=["aria-expanded","aria-owns"],be=["id","value","placeholder","aria-activedescendant"],xe=["id","aria-multiselectable"],we=["id","aria-selected","data-value","onClick"],ye={key:0,class:"combobox__tickbox"},ge=J({__name:"ComboboxInput",props:{id:{type:String,required:!0,validator:t=>!/\s/g.test(t)},label:{type:String,required:!0},options:{type:Array,required:!0},multiselectable:{type:Boolean,default:!1},value:{type:[Array,null],default:null}},emits:["selectedOptions","focus"],setup(t,{emit:d}){var O;const r=d,o=t,w=B(!1),p=B(!1),f=B(0),e=B(""),s=B((O=e.value.split(",").at(-1))==null?void 0:O.trim()),v=B(null);ce(v,()=>g()),V(()=>o.value,()=>{m()}),V(()=>e.value,()=>{var n;s.value=(n=e.value.split(",").at(-1))==null?void 0:n.trim()}),Q(()=>{m()});function m(){o.value&&o.value.length>0?(e.value=o.options.filter(n=>o.value.includes(n)).map(n=>n.text).join(", "),o.multiselectable||(e.value=e.value.split(",")[0].trim(),f.value=o.options.indexOf(o.options.find(n=>n.text===e.value)))):e.value="",r("selectedOptions",e.value.split(",").map(n=>n.trim()).filter(Boolean))}function y(){e.value="",r("selectedOptions",[])}function k(){if(w.value){w.value=!1,de(document.getElementById(o.id),{initialValue:!0});return}g()}function g(){p.value=!1,f.value=0,document.getElementById(`${o.id}-listbox`).scrollTop=0;const n=e.value.split(",").map(c=>c.trim()),i=[...o.options.map(c=>c.text.toLowerCase()),...o.options.map(c=>c.value.toLowerCase())];for(const c of n)i.includes(c.toLowerCase())?e.value=e.value.replace(c,o.options.find(a=>a.text.toLowerCase()===c.toLowerCase()||a.value.toLowerCase()===c.toLowerCase()).text):e.value=e.value.replace(c,"");e.value=e.value.split(",").map(c=>c.trim()).filter(Boolean).join(", "),r("selectedOptions",e.value.split(",").map(c=>c.trim()).filter(Boolean))}function I(n){e.value=n.target.value;const i=e.value.split(",").map(a=>a.trim().toLowerCase()),c=[...o.options.map(a=>a.text.toLowerCase()),...o.options.map(a=>a.value.toLowerCase())];for(const a of i)c.includes(a)?(e.value=e.value.replace(a,o.options.find(x=>x.text.toLowerCase()===a||x.value.toLowerCase()===a).text),r("selectedOptions",e.value.split(",").map(x=>x.trim()).filter(Boolean))):r("selectedOptions",e.value.toLowerCase().replace(a,"").split(",").map(x=>x.trim()).filter(Boolean))}function S(n){const i=o.options.length-1,c=()=>{const a=document.getElementById(`${o.id}-listbox`),x=document.getElementById(`${o.id}-option-${f.value}`);a.scrollTop=x.offsetTop-a.clientHeight/2+x.clientHeight/2};switch(p.value||(p.value=!0),n.key){case"ArrowDown":n.preventDefault(),f.value!==i&&(f.value++,c());break;case"ArrowUp":n.preventDefault(),f.value!==0&&(f.value--,c());break;case"Enter":n.preventDefault(),l(o.options[f.value])}}function l(n){f.value=o.options.indexOf(n),o.multiselectable?u(n)?(e.value=e.value.replace(n.text,"").split(",").map(i=>i.trim()).filter(Boolean).join(", "),e.value.split(",").map(i=>i.trim()).filter(Boolean).length>0&&(e.value+=", ")):e.value=[...e.value.split(","),n.text].map(i=>i.trim()).filter(Boolean).join(", ")+", ":(p.value=!1,e.value=[...e.value.split(","),n.text].map(i=>i.trim()).join(", ")),r("selectedOptions",e.value.split(",").map(i=>i.trim()).filter(Boolean))}function u(n){return e.value.split(",").map(i=>i.trim()).includes(n.text)}function b(n){return o.options[f.value]===n}return(n,i)=>{const c=Y;return _(),A("div",{ref_key:"combobox",ref:v,class:"combobox"},[$("label",{for:t.id,class:"sr-only"},T(t.label),9,ve),$("div",pe,[$("div",{class:D(["combobox__header",{"combobox__header--open":p.value}]),role:"combobox","aria-haspopup":"listbox","aria-expanded":`${p.value}`,"aria-owns":`${t.id}-listbox`},[$("input",{id:t.id,value:e.value,"aria-autocomplete":"list",autocomplete:"off",type:"text",placeholder:t.label,"aria-activedescendant":`${t.id}-option-${f.value}`,onClick:i[0]||(i[0]=a=>!!e.value&&!!e.value.split(",").map(x=>x.trim()).at(-1)&&(e.value+=", ")),onFocus:i[1]||(i[1]=a=>{p.value=!0,r("focus")}),onBlur:k,onInput:i[2]||(i[2]=a=>I(a)),onKeydown:i[3]||(i[3]=a=>S(a))},null,40,be),e.value?(_(),A("button",{key:1,class:"combobox__header-icon combobox__cross",onClick:i[4]||(i[4]=a=>y())},[F(c,{name:"cross"}),i[6]||(i[6]=$("span",{class:"sr-only"},"Clear",-1))])):(_(),X(c,{key:0,class:"combobox__header-icon combobox__chevron",name:"chevron_down"}))],10,me),j($("div",{id:`${t.id}-listbox`,class:"combobox__menu",role:"listbox","aria-multiselectable":`${t.multiselectable}`},[(_(!0),A(Z,null,ee(t.options,(a,x)=>j((_(),A("div",{id:`${t.id}-option-${x}`,key:a.value,class:D(["combobox__option",{"combobox__option--selected":u(a),"combobox__option--current":b(a)}]),role:"option","aria-selected":`${u(a)}`,"data-value":a.value,onClick:H=>l(a),onMousedown:i[5]||(i[5]=H=>w.value=!0)},[t.multiselectable?(_(),A("div",ye,[F(c,{name:"tick"})])):te("",!0),oe(" "+T(a.text),1)],42,we)),[[W,q(fe)(a.text,s.value||"")]])),128))],8,xe),[[W,p.value]])])],512)}}}),Ce=le(ge,[["__scopeId","data-v-5a0dbf31"]]);export{Ce as default};
