import{f as O,a7 as N,a8 as w,a9 as S,H as u,R as I,z as F,W as K,aa as M,y as H,M as E,ab as z,ac as p,a0 as A,ad as j,ae as P,af as W,ag as q,ah as U,ai as V,aj as D,ak as G,F as J,_ as Q,j as X,o as Y}from"./CJcRfODn.js";const B=(t="RouteProvider")=>O({name:t,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(n){const a=n.renderKey,r=n.route,o={};for(const i in n.route)Object.defineProperty(o,i,{get:()=>a===n.renderKey?n.route[i]:r[i],enumerable:!0});return N(S,w(o)),()=>n.vnode?u(n.vnode,{ref:n.vnodeRef}):n.vnode}}),Z=B(),T=new WeakMap,$=O({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(t,{attrs:n,slots:a,expose:r}){const o=I(),i=F(),d=K(S,null);let _;r({pageRef:i});const l=K(M,null);let s;const v=o.deferHydration();if(o.isHydrating){const e=o.hooks.hookOnce("app:error",v);H().beforeEach(e)}t.pageKey&&E(()=>t.pageKey,(e,y)=>{e!==y&&o.callHook("page:loading:start")});let c=!1;{const e=H().beforeResolve(()=>{c=!1});z(()=>{e()})}return()=>u(V,{name:t.name,route:t.route,...n},{default:e=>{const y=ne(d,e.route,e.Component),k=d&&d.matched.length===e.route.matched.length;if(!e.Component){if(s&&!k)return s;v();return}if(s&&l&&!l.isCurrent(e.route))return s;if(y&&d&&(!l||l?.isCurrent(d)))return k?s:null;const f=p(e,t.pageKey),R=te(d,e.route,e.Component);!o.isHydrating&&_===f&&!R&&A(()=>{c=!0,o.callHook("page:loading:end")}),_=f;const g=!!(t.transition??e.route.meta.pageTransition??j),L=g&&ee([t.transition,e.route.meta.pageTransition,j,{onAfterLeave(){delete o._runningTransition,o.callHook("page:transition:finish",e.Component)}}]),b=t.keepalive??e.route.meta.keepalive??P;return s=W(g&&L,q(b,u(U,{suspensible:!0,onPending:()=>{g&&(o._runningTransition=!0),o.callHook("page:start",e.Component)},onResolve:()=>{A(()=>o.callHook("page:finish",e.Component).then(()=>{if(!c&&!R)return c=!0,o.callHook("page:loading:end")}).finally(v))}},{default:()=>{const C={key:f||void 0,vnode:a.default?ae(a.default,e):e.Component,route:e.route,renderKey:f||void 0,trackRootNodes:g,vnodeRef:i};if(!b)return u(Z,C);const h=e.Component.type,x=h;let m=T.get(x);return m||(m=B(h.name||h.__name),T.set(x,m)),u(m,C)}}))).default(),s}})}});function ee(t){const n=t.filter(Boolean).map(a=>({...a,onAfterLeave:a.onAfterLeave?D(a.onAfterLeave):void 0}));return G(...n)}function ne(t,n,a){if(!t)return!1;const r=n.matched.findIndex(o=>o.components?.default===a?.type);return!r||r===-1?!1:n.matched.slice(0,r).some((o,i)=>o.components?.default!==t.matched[i]?.components?.default)||a&&p({route:n,Component:a})!==p({route:t,Component:a})}function te(t,n,a){return t?n.matched.findIndex(o=>o.components?.default===a?.type)<n.matched.length-1:!1}function ae(t,n){const a=t(n);return a.length===1?u(a[0]):u(J,void 0,a)}const oe={};function re(t,n){const a=$;return Y(),X(a)}const se=Q(oe,[["render",re]]);export{se as default};
