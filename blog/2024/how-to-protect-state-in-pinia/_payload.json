[{"data":1,"prerenderedAt":525},["ShallowReactive",2],{"$siNM9WAguS":3,"article-how-to-protect-state-in-pinia":33,"$rpzcfBTaqR":295,"$mMA9bTNYLP":312,"article-list-how-to-protect-state-in-pinia":387},{"metadata":4,"sys":6,"fields":21},{"tags":5},[],{"space":7,"id":12,"type":13,"createdAt":14,"updatedAt":14,"environment":15,"revision":19,"locale":20},{"sys":8},{"type":9,"linkType":10,"id":11},"Link","Space","l1wujzr3g1ab","2HwSTbJwsbPDLabrSltaa3","Asset","2023-02-04T20:48:16.198Z",{"sys":16},{"id":17,"type":9,"linkType":18},"master","Environment",1,"en-GB",{"title":22,"description":23,"file":24},"Open Graphic","Jack Domleo. Frontend & UX Developer.",{"url":25,"details":26,"fileName":31,"contentType":32},"//images.ctfassets.net/l1wujzr3g1ab/2HwSTbJwsbPDLabrSltaa3/b8c5098e2bfd7f192665fccfa3e3380e/og.png",{"size":27,"image":28},8570,{"width":29,"height":30},1200,630,"og.png","image/png",{"sys":34,"total":19,"skip":36,"limit":19,"items":37,"includes":293},{"type":35},"Array",0,[38],{"metadata":39,"sys":42,"fields":56},{"tags":40,"concepts":41},[],[],{"space":43,"id":45,"type":46,"createdAt":47,"updatedAt":48,"environment":49,"revision":51,"contentType":52,"locale":20},{"sys":44},{"type":9,"linkType":10,"id":11},"7CUW25a1jLiar8pzd8K9Nh","Entry","2024-04-07T19:00:42.324Z","2024-04-30T18:52:40.840Z",{"sys":50},{"id":17,"type":9,"linkType":18},2,{"sys":53},{"type":9,"linkType":54,"id":55},"ContentType","article",{"title":57,"slug":58,"image":59,"description":79,"publishDate":80,"tags":81,"body":83},"How to protect state in Pinia ðŸ","how-to-protect-state-in-pinia",{"metadata":60,"sys":62,"fields":70},{"tags":61},[],{"space":63,"id":65,"type":13,"createdAt":66,"updatedAt":67,"environment":68,"revision":51,"locale":20},{"sys":64},{"type":9,"linkType":10,"id":11},"5iurYkErtwupD6LkJba4Jd","2024-03-23T20:34:09.782Z","2024-03-23T20:36:22.415Z",{"sys":69},{"id":17,"type":9,"linkType":18},{"title":71,"description":71,"file":72},"Pineapple",{"url":73,"details":74,"fileName":77,"contentType":78},"//images.ctfassets.net/l1wujzr3g1ab/5iurYkErtwupD6LkJba4Jd/eb717e6e4789957a33423f5f9fea4197/sumner-mahaffey-7vCt_lFxKx4-unsplash.jpg",{"size":75,"image":76},153411,{"width":29,"height":30},"sumner-mahaffey-7vCt_lFxKx4-unsplash.jpg","image/jpeg","Pinia, unlike Vuex, allows the state to be mutated directly, but sometimes we want to protect the state from being changed willy-nilly.","2024-04-07",[82],"Vue",{"nodeType":84,"data":85,"content":86},"document",{},[87,139,156,163,170,186,194,242,265],{"nodeType":88,"data":89,"content":90},"paragraph",{},[91,96,105,109,117,121,129,133],{"nodeType":92,"value":93,"marks":94,"data":95},"text","",[],{},{"nodeType":97,"data":98,"content":100},"hyperlink",{"uri":99},"https://pinia.vuejs.org/",[101],{"nodeType":92,"value":102,"marks":103,"data":104},"Pinia",[],{},{"nodeType":92,"value":106,"marks":107,"data":108}," is a relatively new state management tool for the Vue ecosystem. It is the new preferred state management tool recommended by the Vue core team replacing ",[],{},{"nodeType":97,"data":110,"content":112},{"uri":111},"https://vuex.vuejs.org/",[113],{"nodeType":92,"value":114,"marks":115,"data":116},"Vuex",[],{},{"nodeType":92,"value":118,"marks":119,"data":120},". Compared to Vuex, Pinia is type-safe by default (",[],{},{"nodeType":97,"data":122,"content":124},{"uri":123},"https://github.com/paroi-tech/direct-vuex",[125],{"nodeType":92,"value":126,"marks":127,"data":128},"direct-vuex",[],{},{"nodeType":92,"value":130,"marks":131,"data":132}," was needed to make Vuex type-safe), extremely lightweight, and modular by design (meaning you can create multiple stores instead of multiple modules inside one store, which optimises performance). Similar to Vuex, Pinia has state, computed properties (getters) and methods (mutations and actions). ",[],{},{"nodeType":92,"value":134,"marks":135,"data":138},"Read more about Pinia and its usage to understand the similarities and differences between Pinia and Vuex.",[136],{"type":137},"italic",{},{"nodeType":88,"data":140,"content":141},{},[142,146,152],{"nodeType":92,"value":143,"marks":144,"data":145},"Vuex's state is automatically protected, whereas Pinia's state is not. In Vuex, you could not directly edit the state, to do so you needed a mutation method that would edit or \"mutate\" the state for you. If you tried editing the state directly in Vuex, you would be faced with the following error message, \"",[],{},{"nodeType":92,"value":147,"marks":148,"data":151},"Error: [vuex] do not mutate vuex store state outside mutation handlers.",[149],{"type":150},"code",{},{"nodeType":92,"value":153,"marks":154,"data":155},"\"",[],{},{"nodeType":88,"data":157,"content":158},{},[159],{"nodeType":92,"value":160,"marks":161,"data":162},"But with Pinia, the state is exposed and can be mutated willy nilly from anywhere within your application. In a lot of cases, this is fine and actually makes state management a lot easier and simpler because in these cases there is no need for a mutation method whose sole purpose is to update a state property with the value you passed to the mutation method.",[],{},{"nodeType":88,"data":164,"content":165},{},[166],{"nodeType":92,"value":167,"marks":168,"data":169},"In some cases though, this might not be ideal. For example, we are building a rugby game in Vue (it's just an example, go with it). Unlike with football (or soccer for you Americans) where the scoring system increments by 1 whenever a goal is scored, rugby's scoring system increases by a different number depending on how those points were scored. 5 points for a try, 3 points for a penalty, 2 points for a conversion, and 3 points for a drop goal.",[],{},{"nodeType":88,"data":171,"content":172},{},[173,177,182],{"nodeType":92,"value":174,"marks":175,"data":176},"We want to be able to protect the ",[],{},{"nodeType":92,"value":178,"marks":179,"data":181},"score",[180],{"type":150},{},{"nodeType":92,"value":183,"marks":184,"data":185}," state property by only allowing it to be mutated in a specific way. We can easily do this by creating an exposed computed property that returns the state, and not exposing the state property.",[],{},{"nodeType":88,"data":187,"content":188},{},[189],{"nodeType":92,"value":190,"marks":191,"data":193},"TYPESCRIPT\nimport { defineStore } from 'pinia';\nimport { ref, computed } from 'vue';\n\nexport const useRugbyStore = defineStore('rugbyStory', () => {\n  const _score = ref\u003Cnumber>(0);\n\n  const score = computed(() => _score.value);\n\n  function scorePoints(type: 'try'|'penalty'|'conversion'|'drop goal'): void {\n    switch (type) {\n      case 'try':\n        _score.value += 5;\n        break;\n      case 'penalty':\n      case 'drop goal':\n        _score.value += 3;\n        break;\n      case 'conversion':\n        _score.value += 2;\n        break;\n    }\n  }\n\n  return { score, scorePoints };\n})",[192],{"type":150},{},{"nodeType":88,"data":195,"content":196},{},[197,201,206,210,214,218,222,226,230,234,239],{"nodeType":92,"value":198,"marks":199,"data":200},"In the example above, ",[],{},{"nodeType":92,"value":202,"marks":203,"data":205},"_score",[204],{"type":150},{},{"nodeType":92,"value":207,"marks":208,"data":209}," (annotated prefixed with an underscore to show it is internal) can be read via the ",[],{},{"nodeType":92,"value":178,"marks":211,"data":213},[212],{"type":150},{},{"nodeType":92,"value":215,"marks":216,"data":217}," computed property, but cannot be mutated directly. Since ",[],{},{"nodeType":92,"value":178,"marks":219,"data":221},[220],{"type":150},{},{"nodeType":92,"value":223,"marks":224,"data":225}," is a computed property, Vue does not allow its value to be changed, if you try editing the value of ",[],{},{"nodeType":92,"value":178,"marks":227,"data":229},[228],{"type":150},{},{"nodeType":92,"value":231,"marks":232,"data":233},", you will get the following TypeScript error, \"",[],{},{"nodeType":92,"value":235,"marks":236,"data":238},"Cannot assign to \"score\" because it is a read-only property.",[237],{"type":150},{},{"nodeType":92,"value":153,"marks":240,"data":241},[],{},{"nodeType":88,"data":243,"content":244},{},[245,249,253,257,261],{"nodeType":92,"value":246,"marks":247,"data":248},"One caveat to this though is that ",[],{},{"nodeType":92,"value":178,"marks":250,"data":252},[251],{"type":150},{},{"nodeType":92,"value":254,"marks":255,"data":256}," or ",[],{},{"nodeType":92,"value":202,"marks":258,"data":260},[259],{"type":150},{},{"nodeType":92,"value":262,"marks":263,"data":264}," will never appear in Pinia's global state or in the Vue devtools Pinia panel, so keep this in mind.",[],{},{"nodeType":88,"data":266,"content":267},{},[268,272,280,284,289],{"nodeType":92,"value":269,"marks":270,"data":271},"I feel this is quite a simple, neat, easy-to-maintain, and type-safe method of protecting Pinia state. I have found other methods of protecting state such as ",[],{},{"nodeType":97,"data":273,"content":275},{"uri":274},"https://github.com/vuejs/pinia/issues/58#issuecomment-983284955",[276],{"nodeType":92,"value":277,"marks":278,"data":279},"this example",[],{},{"nodeType":92,"value":281,"marks":282,"data":283}," using Vue's ",[],{},{"nodeType":92,"value":285,"marks":286,"data":288},"readonly()",[287],{"type":150},{},{"nodeType":92,"value":290,"marks":291,"data":292}," method but I didn't find this to be type-safe or very nice to use.",[],{},{"Asset":294},[59],{"sys":296,"total":19,"skip":36,"limit":19,"items":297},{"type":35},[298],{"fields":299,"sys":310},{"articleDisclaimer":300},{"data":301,"content":302,"nodeType":84},{},[303],{"data":304,"content":305,"nodeType":88},{},[306],{"data":307,"marks":308,"value":309,"nodeType":92},{},[],"Disclaimer: All data and information are correct to the best of my knowledge at the time of writing.",{"id":311,"type":46},"3Viop9UQLlIrWglTQjk5Bd",{"sys":313,"total":19,"skip":36,"limit":19,"items":314},{"type":35},[315],{"metadata":316,"sys":319,"fields":331},{"tags":317,"concepts":318},[],[],{"space":320,"id":322,"type":46,"createdAt":323,"updatedAt":324,"environment":325,"revision":327,"contentType":328,"locale":20},{"sys":321},{"type":9,"linkType":10,"id":11},"6LjVGiRVd7SMt9ewdVBNbQ","2023-01-01T15:40:18.235Z","2023-12-16T18:46:15.368Z",{"sys":326},{"id":17,"type":9,"linkType":18},12,{"sys":329},{"type":9,"linkType":54,"id":330},"footer",{"name":332,"quickLinks":333,"socialLinks":350,"legalText":363},"Footer",[334,338,342,346],{"id":335,"key":336,"value":337},"dbd24c1c-5840-4132-af46-08b3762b393b","Home","/",{"id":339,"key":340,"value":341},"3b093617-4c9c-41b7-ab57-72a53a2cb400","Blog","/blog",{"id":343,"key":344,"value":345},"6d25b987-cc30-4b09-93f3-fd6d947c7ffc","Links","/links",{"id":347,"key":348,"value":349},"ceaccf06-ba0a-41d5-9202-56beaaa5f242","Projects","/projects",[351,355,359],{"id":352,"key":353,"value":354},"6ca24d29-3228-4215-8b8e-32ad04743b65","GitHub","https://github.com/jackdomleo7",{"id":356,"key":357,"value":358},"46719126-f516-4853-9444-e40cd0576918","CodePen","https://codepen.io/jackdomleo7",{"id":360,"key":361,"value":362},"c1581e8d-c729-4232-8944-0f767d94177d","LinkedIn","https://linkedin.com/in/jackdomleo7",{"data":364,"content":365,"nodeType":84},{},[366,373,380],{"data":367,"content":368,"nodeType":88},{},[369],{"data":370,"marks":371,"value":372,"nodeType":92},{},[],"Â©2018-2024",{"data":374,"content":375,"nodeType":88},{},[376],{"data":377,"marks":378,"value":379,"nodeType":92},{},[],"All rights reserved.",{"data":381,"content":382,"nodeType":88},{},[383],{"data":384,"marks":385,"value":386,"nodeType":92},{},[],"Jack Domleo",{"sys":388,"total":389,"skip":36,"limit":390,"items":391,"includes":511},{"type":35},5,1000,[392,423,453,482],{"fields":393,"sys":421},{"title":394,"description":395,"image":396,"tags":415,"publishDate":419,"slug":420},"When is a clickable div okay?","When it comes to accessibility, putting a click event on a div is taboo, but when is it okay to do so?",{"metadata":397,"sys":399,"fields":406},{"tags":398},[],{"space":400,"id":402,"type":13,"createdAt":403,"updatedAt":403,"environment":404,"revision":19,"locale":20},{"sys":401},{"type":9,"linkType":10,"id":11},"3nzHtHCAq4EKudWvrOOw4p","2023-07-11T21:23:08.036Z",{"sys":405},{"id":17,"type":9,"linkType":18},{"title":407,"description":408,"file":409},"When is a clickable div okay","An example modal element",{"url":410,"details":411,"fileName":414,"contentType":32},"//images.ctfassets.net/l1wujzr3g1ab/3nzHtHCAq4EKudWvrOOw4p/8bd8a51d97f431c933084f4413036eec/when-is-a-clickable-div-okay.png",{"size":412,"image":413},133997,{"width":29,"height":30},"when-is-a-clickable-div-okay.png",[416,417,418],"Accessibility","UX","HTML","2023-07-18","when-is-a-clickable-div-okay",{"id":422,"type":46},"brxitJC35PyChlVzusyLP",{"fields":424,"sys":451},{"title":425,"description":426,"image":427,"tags":446,"publishDate":449,"slug":450},"Should you clean out your blog?","If like me, you own a blog, you may ask yourself if it's ever a good idea to clean it out from time to time.",{"metadata":428,"sys":430,"fields":437},{"tags":429},[],{"space":431,"id":433,"type":13,"createdAt":434,"updatedAt":434,"environment":435,"revision":19,"locale":20},{"sys":432},{"type":9,"linkType":10,"id":11},"6Fk3J1WEn0YRhIGUawl63P","2023-02-15T20:26:31.807Z",{"sys":436},{"id":17,"type":9,"linkType":18},{"title":438,"description":439,"file":440},"clutter","A cluttered office desk",{"url":441,"details":442,"fileName":445,"contentType":78},"//images.ctfassets.net/l1wujzr3g1ab/6Fk3J1WEn0YRhIGUawl63P/a98a9a5ba72aef1afc04111bc7a9e5f9/clutter.jpg",{"size":443,"image":444},281805,{"width":29,"height":30},"clutter.jpg",[447,448,418],"Tips","Productivity","2023-02-16","should-you-clean-out-your-blog",{"id":452,"type":46},"9dijdAHS9ROnOwXit47NQ",{"fields":454,"sys":480},{"title":455,"description":456,"image":457,"tags":476,"publishDate":478,"slug":479},"@media (hover: hover) - CSS Media Query","The hover CSS media feature can be used to test whether the user's primary input mechanism can hover over elements.",{"metadata":458,"sys":460,"fields":467},{"tags":459},[],{"space":461,"id":463,"type":13,"createdAt":464,"updatedAt":464,"environment":465,"revision":19,"locale":20},{"sys":462},{"type":9,"linkType":10,"id":11},"1BWwf3Fg2A0y1RhcY7oNqq","2023-01-22T21:55:22.730Z",{"sys":466},{"id":17,"type":9,"linkType":18},{"title":468,"description":469,"file":470},"css=hover-media-query-og","CSS media query for hover",{"url":471,"details":472,"fileName":475,"contentType":32},"//images.ctfassets.net/l1wujzr3g1ab/1BWwf3Fg2A0y1RhcY7oNqq/0dadb7c242364de5ac4f5b63dd57f1b6/css_hover-media-query-og.png",{"size":473,"image":474},13019,{"width":29,"height":30},"css=hover-media-query-og.png",[477],"CSS","2020-07-06","hover-css-media-query",{"id":481,"type":46},"5GKjEQKbXAneX7HsUv1qtm",{"fields":483,"sys":509},{"title":484,"description":485,"image":486,"tags":505,"publishDate":507,"slug":508},"Learning Neumorphic Design","The awesome design trend that never took off! What are the fundamentals to neumorphic design?",{"metadata":487,"sys":489,"fields":496},{"tags":488},[],{"space":490,"id":492,"type":13,"createdAt":493,"updatedAt":493,"environment":494,"revision":19,"locale":20},{"sys":491},{"type":9,"linkType":10,"id":11},"T6RRM5TpnSzYm6UQolMMf","2023-01-24T20:35:16.287Z",{"sys":495},{"id":17,"type":9,"linkType":18},{"title":497,"description":498,"file":499},"neumorphic-design-og","A music player UI with a neumorphism design",{"url":500,"details":501,"fileName":504,"contentType":32},"//images.ctfassets.net/l1wujzr3g1ab/T6RRM5TpnSzYm6UQolMMf/a51b32aea0faa8885d8e525c436b5073/neumorphic-design-og.png",{"size":502,"image":503},6959,{"width":29,"height":30},"neumorphic-design-og.png",[506,477],"Design","2020-05-27","learning-neumorphic-design",{"id":510,"type":46},"2KWdODn6oaRYNzG4Qz4yd3",{"Asset":512},[457,396,513,427,486],{"metadata":514,"sys":516,"fields":521},{"tags":515},[],{"space":517,"id":65,"type":13,"createdAt":66,"updatedAt":67,"environment":519,"revision":51,"locale":20},{"sys":518},{"type":9,"linkType":10,"id":11},{"sys":520},{"id":17,"type":9,"linkType":18},{"title":71,"description":71,"file":522},{"url":73,"details":523,"fileName":77,"contentType":78},{"size":75,"image":524},{"width":29,"height":30},1728954363839]